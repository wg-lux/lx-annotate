import{d as Z,B as J,e as y,i as H,w as ss,c as d,j as O,n as $,a as s,k as l,C as b,p as C,t as i,y as Q,o as r,_ as W,f as ts,h as P,b as U,D as K,r as es,F as D,m as V,z as A,A as G}from"./main.js";const ns={class:"annotation-stats-overview"},as={key:0,class:"text-center py-5"},is={key:1},os={class:"row mb-4"},ls={class:"col-12"},ds={class:"card bg-gradient-primary text-white"},rs={class:"card-body"},cs={class:"row align-items-center"},us={class:"col-4 text-end"},vs=["disabled"],ms={class:"row mb-4"},gs={class:"col-12"},bs={class:"card"},ps={class:"card-body"},_s={class:"progress-container"},hs={class:"progress mb-2",style:{height:"30px"}},fs=["aria-valuenow"],ys={class:"progress-text"},ks=["aria-valuenow"],xs={class:"progress-text"},ws=["aria-valuenow"],As={class:"progress-text"},Ss={class:"progress-legend d-flex justify-content-between"},$s={class:"text-muted"},Cs={class:"text-muted"},Ps={class:"row mb-4"},Is={class:"col-md-4 mb-3"},Ms={class:"card-header bg-primary text-white"},Ts={class:"d-flex justify-content-between align-items-center"},Us={class:"badge bg-light text-primary"},Ds={class:"card-body"},Vs={class:"stats-grid"},Es={class:"stat-item pending"},Ls={class:"stat-info"},Ns={class:"stat-number"},zs={class:"stat-item in-progress"},Fs={class:"stat-info"},Bs={class:"stat-number"},qs={class:"stat-item completed"},js={class:"stat-info"},Ks={class:"stat-number"},Rs={class:"mini-progress mt-3"},Gs={class:"progress",style:{height:"6px"}},Js={class:"text-muted mt-1 d-block"},Hs={class:"col-md-4 mb-3"},Os={class:"card-header bg-success text-white"},Qs={class:"d-flex justify-content-between align-items-center"},Ws={class:"badge bg-light text-success"},Xs={class:"card-body"},Ys={class:"stats-grid"},Zs={class:"stat-item pending"},st={class:"stat-info"},tt={class:"stat-number"},et={class:"stat-item in-progress"},nt={class:"stat-info"},at={class:"stat-number"},it={class:"stat-item completed"},ot={class:"stat-info"},lt={class:"stat-number"},dt={class:"mini-progress mt-3"},rt={class:"progress",style:{height:"6px"}},ct={class:"text-muted mt-1 d-block"},ut={class:"col-md-4 mb-3"},vt={class:"card-header bg-warning text-dark"},mt={class:"d-flex justify-content-between align-items-center"},gt={class:"badge bg-dark text-warning"},bt={class:"card-body"},pt={class:"stats-grid"},_t={class:"stat-item pending"},ht={class:"stat-info"},ft={class:"stat-number"},yt={class:"stat-item in-progress"},kt={class:"stat-info"},xt={class:"stat-number"},wt={class:"stat-item completed"},At={class:"stat-info"},St={class:"stat-number"},$t={class:"mini-progress mt-3"},Ct={class:"progress",style:{height:"6px"}},Pt={class:"text-muted mt-1 d-block"},It={key:2,class:"alert alert-danger mt-3"},Mt=Z({__name:"AnnotationStatsComponent",setup(X){const k=Q(),o=J(),v=y(()=>({pending:o.stats.segmentPending||0,inProgress:o.stats.segmentInProgress||0,completed:o.stats.segmentCompleted||0,total:(o.stats.segmentPending||0)+(o.stats.segmentInProgress||0)+(o.stats.segmentCompleted||0)})),m=y(()=>({pending:o.stats.examinationPending||0,inProgress:o.stats.examinationInProgress||0,completed:o.stats.examinationCompleted||0,total:(o.stats.examinationPending||0)+(o.stats.examinationInProgress||0)+(o.stats.examinationCompleted||0)})),g=y(()=>({pending:o.stats.sensitiveMetaPending||0,inProgress:o.stats.sensitiveMetaInProgress||0,completed:o.stats.sensitiveMetaCompleted||0,total:(o.stats.sensitiveMetaPending||0)+(o.stats.sensitiveMetaInProgress||0)+(o.stats.sensitiveMetaCompleted||0)})),_=y(()=>o.completionPercentage||0),h=y(()=>o.inProgressPercentage||0),f=y(()=>o.pendingPercentage||0),x=y(()=>o.stats.totalAnnotations||0),E=y(()=>o.stats.totalAnnotations>0||o.lastUpdated!==null),I=y(()=>{if(!o.lastUpdated)return"Nie";const e=new Date().getTime()-o.lastUpdated.getTime(),w=Math.floor(e/6e4);if(w<1)return"Gerade eben";if(w<60)return`vor ${w} Min.`;const T=Math.floor(w/60);return T<24?`vor ${T} Std.`:`vor ${Math.floor(T/24)} Tag(en)`}),p=c=>c.total>0?Math.round(c.completed/c.total*100):0,M=async()=>{try{await o.forceRefresh()}catch(c){console.error("Failed to refresh stats:",c)}},L=()=>{const c=document.querySelector('[data-section="segments"]');c?c.scrollIntoView({behavior:"smooth"}):k.push("/segments")},N=()=>{k.push("/examinations")},z=()=>{k.push("/sensitive-meta")},F=()=>{k.push("/frame-annotation")},B=()=>{k.push("/examination")},q=()=>{k.push("/validation")};return H(async()=>{await o.fetchAnnotationStats()}),ss(()=>o.needsRefresh,async c=>{c&&await o.refreshIfNeeded()}),(c,e)=>(r(),d("div",ns,[$(o).isLoading&&!E.value?(r(),d("div",as,[...e[1]||(e[1]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Laden...")],-1),s("p",{class:"mt-3 text-muted"},"Statistiken werden geladen...",-1)])])):(r(),d("div",is,[s("div",os,[s("div",ls,[s("div",ds,[s("div",rs,[s("div",cs,[e[3]||(e[3]=s("div",{class:"col-8"},[s("h4",{class:"text-white mb-1"},[s("i",{class:"fas fa-chart-pie me-2"}),l(" Annotation Übersicht ")]),s("p",{class:"text-white opacity-8 mb-0"}," Aktuell verfügbare Annotationen und deren Fortschritt ")],-1)),s("div",us,[s("button",{class:"btn btn-outline-light btn-sm",onClick:M,disabled:$(o).isLoading},[s("i",{class:b(["fas fa-sync-alt",{"fa-spin":$(o).isLoading}])},null,2),e[2]||(e[2]=l(" Aktualisieren ",-1))],8,vs)])])])])])]),s("div",ms,[s("div",gs,[s("div",bs,[s("div",ps,[e[4]||(e[4]=s("h6",{class:"card-title mb-3"},[s("i",{class:"fas fa-tasks me-2"}),l(" Gesamtfortschritt ")],-1)),s("div",_s,[s("div",hs,[s("div",{class:"progress-bar bg-success",role:"progressbar",style:C({width:_.value+"%"}),"aria-valuenow":_.value,"aria-valuemin":"0","aria-valuemax":"100"},[s("span",ys,i(_.value)+"% Abgeschlossen ",1)],12,fs),s("div",{class:"progress-bar bg-info",role:"progressbar",style:C({width:h.value+"%"}),"aria-valuenow":h.value,"aria-valuemin":"0","aria-valuemax":"100"},[s("span",xs,i(h.value)+"% In Bearbeitung ",1)],12,ks),s("div",{class:"progress-bar bg-warning",role:"progressbar",style:C({width:f.value+"%"}),"aria-valuenow":f.value,"aria-valuemin":"0","aria-valuemax":"100"},[s("span",As,i(f.value)+"% Ausstehend ",1)],12,ws)]),s("div",Ss,[s("small",$s," Total: "+i(x.value)+" Annotationen ",1),s("small",Cs," Letzte Aktualisierung: "+i(I.value),1)])])])])])]),s("div",Ps,[s("div",Is,[s("div",{class:"card h-100 annotation-type-card",onClick:L},[s("div",Ms,[s("div",Ts,[e[5]||(e[5]=s("h6",{class:"mb-0"},[s("i",{class:"fas fa-video me-2"}),l(" Video-Segmente ")],-1)),s("span",Us,i(v.value.total),1)])]),s("div",Ds,[s("div",Vs,[s("div",Es,[e[7]||(e[7]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-clock"})],-1)),s("div",Ls,[s("div",Ns,i(v.value.pending),1),e[6]||(e[6]=s("div",{class:"stat-label"},"Ausstehend",-1))])]),s("div",zs,[e[9]||(e[9]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-cogs"})],-1)),s("div",Fs,[s("div",Bs,i(v.value.inProgress),1),e[8]||(e[8]=s("div",{class:"stat-label"},"In Bearbeitung",-1))])]),s("div",qs,[e[11]||(e[11]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",js,[s("div",Ks,i(v.value.completed),1),e[10]||(e[10]=s("div",{class:"stat-label"},"Abgeschlossen",-1))])])]),s("div",Rs,[s("div",Gs,[s("div",{class:"progress-bar bg-success",style:C({width:p(v.value)+"%"})},null,4)]),s("small",Js,i(p(v.value))+"% abgeschlossen ",1)])])])]),s("div",Hs,[s("div",{class:"card h-100 annotation-type-card",onClick:N},[s("div",Os,[s("div",Qs,[e[12]||(e[12]=s("h6",{class:"mb-0"},[s("i",{class:"fas fa-stethoscope me-2"}),l(" Untersuchungen ")],-1)),s("span",Ws,i(m.value.total),1)])]),s("div",Xs,[s("div",Ys,[s("div",Zs,[e[14]||(e[14]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-clock"})],-1)),s("div",st,[s("div",tt,i(m.value.pending),1),e[13]||(e[13]=s("div",{class:"stat-label"},"Ausstehend",-1))])]),s("div",et,[e[16]||(e[16]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-cogs"})],-1)),s("div",nt,[s("div",at,i(m.value.inProgress),1),e[15]||(e[15]=s("div",{class:"stat-label"},"In Bearbeitung",-1))])]),s("div",it,[e[18]||(e[18]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",ot,[s("div",lt,i(m.value.completed),1),e[17]||(e[17]=s("div",{class:"stat-label"},"Abgeschlossen",-1))])])]),s("div",dt,[s("div",rt,[s("div",{class:"progress-bar bg-success",style:C({width:p(m.value)+"%"})},null,4)]),s("small",ct,i(p(m.value))+"% abgeschlossen ",1)])])])]),s("div",ut,[s("div",{class:"card h-100 annotation-type-card",onClick:z},[s("div",vt,[s("div",mt,[e[19]||(e[19]=s("h6",{class:"mb-0"},[s("i",{class:"fas fa-user-shield me-2"}),l(" Patientendaten ")],-1)),s("span",gt,i(g.value.total),1)])]),s("div",bt,[s("div",pt,[s("div",_t,[e[21]||(e[21]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-clock"})],-1)),s("div",ht,[s("div",ft,i(g.value.pending),1),e[20]||(e[20]=s("div",{class:"stat-label"},"Ausstehend",-1))])]),s("div",yt,[e[23]||(e[23]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-cogs"})],-1)),s("div",kt,[s("div",xt,i(g.value.inProgress),1),e[22]||(e[22]=s("div",{class:"stat-label"},"In Bearbeitung",-1))])]),s("div",wt,[e[25]||(e[25]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",At,[s("div",St,i(g.value.completed),1),e[24]||(e[24]=s("div",{class:"stat-label"},"Abgeschlossen",-1))])])]),s("div",$t,[s("div",Ct,[s("div",{class:"progress-bar bg-success",style:C({width:p(g.value)+"%"})},null,4)]),s("small",Pt,i(p(g.value))+"% abgeschlossen ",1)])])])])]),s("div",{class:"row"},[s("div",{class:"col-12"},[s("div",{class:"card"},[e[29]||(e[29]=s("div",{class:"card-header"},[s("h6",{class:"mb-0"},[s("i",{class:"fas fa-bolt me-2"}),l(" Schnellaktionen ")])],-1)),s("div",{class:"card-body"},[s("div",{class:"row"},[s("div",{class:"col-md-4"},[s("div",{class:"quick-action-item",onClick:F},[...e[26]||(e[26]=[s("div",{class:"action-icon bg-primary"},[s("i",{class:"fas fa-plus"})],-1),s("div",{class:"action-content"},[s("h6",null,"Neue Video-Annotation"),s("small",{class:"text-muted"},"Frame-Annotation starten")],-1)])])]),s("div",{class:"col-md-4"},[s("div",{class:"quick-action-item",onClick:B},[...e[27]||(e[27]=[s("div",{class:"action-icon bg-success"},[s("i",{class:"fas fa-plus"})],-1),s("div",{class:"action-content"},[s("h6",null,"Neue Untersuchung"),s("small",{class:"text-muted"},"Untersuchung erstellen")],-1)])])]),s("div",{class:"col-md-4"},[s("div",{class:"quick-action-item",onClick:q},[...e[28]||(e[28]=[s("div",{class:"action-icon bg-warning"},[s("i",{class:"fas fa-play"})],-1),s("div",{class:"action-content"},[s("h6",null,"Validierung starten"),s("small",{class:"text-muted"},"Patientendaten validieren")],-1)])])])])])])])])])),$(o).hasError?(r(),d("div",It,[e[30]||(e[30]=s("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),e[31]||(e[31]=s("strong",null,"Fehler beim Laden der Statistiken:",-1)),l(" "+i($(o).error)+" ",1),s("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=w=>$(o).clearError())})])):O("",!0)]))}}),Tt=W(Mt,[["__scopeId","data-v-2dd8eec5"]]),Ut={class:"container-fluid py-4"},Dt={class:"row mt-4"},Vt={class:"col-12 mb-4"},Et={class:"card"},Lt={class:"card-header d-flex justify-content-between align-items-center"},Nt={class:"header-actions"},zt=["disabled"],Ft={class:"card-body"},Bt={class:"table-responsive"},qt={class:"table table-hover"},jt={key:0},Kt={key:1},Rt={class:"badge bg-info"},Gt={class:"btn-group btn-group-sm"},Jt=["onClick"],Ht=["onClick","disabled"],Ot={class:"col-12 mb-4"},Qt={class:"card"},Wt={class:"card-header d-flex justify-content-between align-items-center"},Xt={class:"header-actions"},Yt=["disabled"],Zt={class:"card-body"},se={class:"table-responsive"},te={class:"table table-hover"},ee={key:0},ne={key:1},ae={key:0,class:"badge bg-light text-dark"},ie={class:"btn-group btn-group-sm"},oe=["onClick"],le=["onClick","disabled"],de={class:"col-12 mb-4"},re={class:"card"},ce={class:"card-header d-flex justify-content-between align-items-center"},ue={class:"header-actions"},ve=["disabled"],me={class:"card-body"},ge={class:"table-responsive"},be={class:"table table-hover"},pe={key:0},_e={key:1},he={class:"btn-group btn-group-sm"},fe=["onClick"],ye=["onClick","disabled"],ke={__name:"AnnotationDashboard",setup(X){const k=ts(),o=Q(),v=J(),m=P([]),g=P([]),_=P([]),h=P(!1),f=P(!1),x=P(!1),E=n=>{console.error(n),k.error(n)},I=async()=>{h.value=!0;try{const n=await A.get("/api/media/videos/segments/");m.value=n.data.results||n.data||[]}catch{E("Fehler beim Laden der Video-Segmente"),m.value=[]}finally{h.value=!1}},p=async()=>{f.value=!0;try{const n=await A.get("/api/examinations/");g.value=n.data.results||n.data||[]}catch(n){console.error("Fehler beim Laden der Untersuchungen:",n),g.value=[]}finally{f.value=!1}},M=async()=>{x.value=!0;try{const[n,t]=await Promise.all([A.get(G("media/videos/")).catch(()=>({data:[]})),A.get(G("media/pdfs/sensitive-metadata/")).catch(()=>({data:{results:[]}}))]),S=Array.isArray(n.data)?n.data:n.data?[{...n.data,content_type:"video"}]:[],a=t.data?.results||(Array.isArray(t.data)?t.data:t.data?[t.data]:[]);S.forEach(u=>u.content_type="video"),a.forEach(u=>u.content_type="pdf"),_.value=[...S,...a],console.log("Loaded sensitive metadata:",_.value.length,"items")}catch(n){console.error("Fehler beim Laden der Patientendaten:",n),_.value=[]}finally{x.value=!1}},L=n=>({pending:"bg-warning",in_progress:"bg-info",completed:"bg-success",rejected:"bg-danger"})[n]||"bg-secondary",N=n=>({pending:"Ausstehend",in_progress:"In Bearbeitung",completed:"Abgeschlossen",rejected:"Abgelehnt"})[n]||n,z=n=>({pending:"bg-warning",in_progress:"bg-info",completed:"bg-success",draft:"bg-secondary"})[n]||"bg-secondary",F=n=>({pending:"Ausstehend",in_progress:"In Bearbeitung",completed:"Abgeschlossen",draft:"Entwurf"})[n]||n,B=n=>({pending_validation:"bg-warning",validated_pending_anonymization:"bg-info",anonymized:"bg-success",no_sensitive_data:"bg-primary"})[n]||"bg-secondary",q=n=>({pending_validation:"Validierung ausstehend",validated_pending_anonymization:"Validiert - Anonymisierung ausstehend",anonymized:"Anonymisiert",no_sensitive_data:"Keine sensitiven Daten"})[n]||n,c=n=>{o.push({name:"Frame Annotation",query:{videoId:n.video_id,segmentId:n.id}})},e=async n=>{try{await A.patch(`/api/media/videos/segments/${n.id}/`,{status:"completed"}),v.updateAnnotationStatus("segment","in_progress","completed"),await I()}catch(t){console.error("Fehler beim Markieren des Segments als abgeschlossen:",t)}},w=n=>{o.push({name:"Untersuchung",query:{examinationId:n.id}})},T=async n=>{try{await A.patch(`/api/examinations/${n.id}/`,{status:"completed"}),v.updateAnnotationStatus("examination","in_progress","completed"),await p()}catch(t){console.error("Fehler beim Markieren der Untersuchung als abgeschlossen:",t)}},R=n=>{n.content_type==="video"?o.push("/video-meta-annotation"):n.content_type==="pdf"&&o.push("/pdf-meta-annotation")},Y=async n=>{try{const t=n.content_type==="video"?"/api/media/videos/":"/api/media/pdf/";await A.patch(t,{sensitive_meta_id:n.id,requires_validation:!1,anonymization_status:"validated_pending_anonymization"}),v.updateAnnotationStatus("sensitive_meta","pending","completed"),await M()}catch(t){console.error("Fehler beim Markieren der Patientendaten als validiert:",t)}},j=n=>{if(!n)return"Nicht verfügbar";try{return new Date(n).toLocaleDateString("de-DE")}catch{return"Ungültiges Datum"}};return H(async()=>{await v.fetchAnnotationStats(),await Promise.all([I(),p(),M()])}),(n,t)=>{const S=es("router-link");return r(),d("div",Ut,[U(Tt),s("div",Dt,[s("div",Vt,[s("div",Et,[s("div",Lt,[t[2]||(t[2]=s("h5",{class:"mb-0"},[s("i",{class:"fas fa-video text-primary me-2"}),l(" Video-Segment Annotationen ")],-1)),s("div",Nt,[s("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:I,disabled:h.value},[s("i",{class:b(["fas fa-sync-alt",{"fa-spin":h.value}])},null,2),t[0]||(t[0]=l(" Aktualisieren ",-1))],8,zt),U(S,{to:"/frame-annotation",class:"btn btn-primary btn-sm"},{default:K(()=>[...t[1]||(t[1]=[s("i",{class:"fas fa-plus me-1"},null,-1),l(" Neue Annotation ",-1)])]),_:1})])]),s("div",Ft,[s("div",Bt,[s("table",qt,[t[7]||(t[7]=s("thead",{class:"table-dark"},[s("tr",null,[s("th",null,"Video ID"),s("th",null,"Segment"),s("th",null,"Label"),s("th",null,"Status"),s("th",null,"Benutzer"),s("th",null,"Letzte Änderung"),s("th",null,"Aktionen")])],-1)),s("tbody",null,[h.value?(r(),d("tr",jt,[...t[3]||(t[3]=[s("td",{colspan:"7",class:"text-center"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Laden...")])],-1)])])):m.value.length===0?(r(),d("tr",Kt,[...t[4]||(t[4]=[s("td",{colspan:"7",class:"text-center text-muted"},[s("i",{class:"fas fa-video fa-2x mb-2"}),s("br"),l(" Keine Video-Segmente verfügbar ")],-1)])])):(r(!0),d(D,{key:2},V(m.value,a=>(r(),d("tr",{key:a.id},[s("td",null,[s("code",null,i(a.videoId),1)]),s("td",null,i(a.startTime)+"s - "+i(a.endTime)+"s",1),s("td",null,[s("span",Rt,i(a.labelName),1)]),s("td",null,[s("span",{class:b(["badge",L(a.status)])},i(N(a.status)),3)]),s("td",null,[s("small",null,i(a.annotated_by||"Nicht zugewiesen"),1)]),s("td",null,[s("small",null,i(j(a.updated_at)),1)]),s("td",null,[s("div",Gt,[s("button",{class:"btn btn-outline-primary",onClick:u=>c(a),title:"Segment bearbeiten"},[...t[5]||(t[5]=[s("i",{class:"fas fa-edit"},null,-1)])],8,Jt),s("button",{class:"btn btn-outline-success",onClick:u=>e(a),disabled:a.status==="completed",title:"Als abgeschlossen markieren"},[...t[6]||(t[6]=[s("i",{class:"fas fa-check"},null,-1)])],8,Ht)])])]))),128))])])])])])]),s("div",Ot,[s("div",Qt,[s("div",Wt,[t[10]||(t[10]=s("h5",{class:"mb-0"},[s("i",{class:"fas fa-stethoscope text-success me-2"}),l(" Examination Annotationen ")],-1)),s("div",Xt,[s("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:p,disabled:f.value},[s("i",{class:b(["fas fa-sync-alt",{"fa-spin":f.value}])},null,2),t[8]||(t[8]=l(" Aktualisieren ",-1))],8,Yt),U(S,{to:"/untersuchung",class:"btn btn-success btn-sm"},{default:K(()=>[...t[9]||(t[9]=[s("i",{class:"fas fa-plus me-1"},null,-1),l(" Neue Untersuchung ",-1)])]),_:1})])]),s("div",Zt,[s("div",se,[s("table",te,[t[15]||(t[15]=s("thead",{class:"table-dark"},[s("tr",null,[s("th",null,"ID"),s("th",null,"Patient"),s("th",null,"Untersuchungsdatum"),s("th",null,"Befunde"),s("th",null,"Status"),s("th",null,"Untersucher"),s("th",null,"Aktionen")])],-1)),s("tbody",null,[f.value?(r(),d("tr",ee,[...t[11]||(t[11]=[s("td",{colspan:"7",class:"text-center"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Laden...")])],-1)])])):g.value.length===0?(r(),d("tr",ne,[...t[12]||(t[12]=[s("td",{colspan:"7",class:"text-center text-muted"},[s("i",{class:"fas fa-stethoscope fa-2x mb-2"}),s("br"),l(" Keine Untersuchungen verfügbar ")],-1)])])):(r(!0),d(D,{key:2},V(g.value,a=>(r(),d("tr",{key:a.id},[s("td",null,[s("code",null,i(a.id),1)]),s("td",null,i(a.patient?.first_name)+" "+i(a.patient?.last_name),1),s("td",null,i(j(a.examination_date)),1),s("td",null,[(r(!0),d(D,null,V(a.findings?.slice(0,2),u=>(r(),d("span",{class:"badge bg-secondary me-1",key:u.id},i(u.name),1))),128)),a.findings?.length>2?(r(),d("span",ae," +"+i(a.findings.length-2)+" weitere ",1)):O("",!0)]),s("td",null,[s("span",{class:b(["badge",z(a.status)])},i(F(a.status)),3)]),s("td",null,[s("small",null,i(a.created_by||"Unbekannt"),1)]),s("td",null,[s("div",ie,[s("button",{class:"btn btn-outline-primary",onClick:u=>w(a),title:"Untersuchung bearbeiten"},[...t[13]||(t[13]=[s("i",{class:"fas fa-edit"},null,-1)])],8,oe),s("button",{class:"btn btn-outline-success",onClick:u=>T(a),disabled:a.status==="completed",title:"Als abgeschlossen markieren"},[...t[14]||(t[14]=[s("i",{class:"fas fa-check"},null,-1)])],8,le)])])]))),128))])])])])])]),s("div",de,[s("div",re,[s("div",ce,[t[18]||(t[18]=s("h5",{class:"mb-0"},[s("i",{class:"fas fa-user-shield text-warning me-2"}),l(" Patientendaten Validierung ")],-1)),s("div",ue,[s("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:M,disabled:x.value},[s("i",{class:b(["fas fa-sync-alt",{"fa-spin":x.value}])},null,2),t[16]||(t[16]=l(" Aktualisieren ",-1))],8,ve),U(S,{to:"/video-meta-annotation",class:"btn btn-warning btn-sm"},{default:K(()=>[...t[17]||(t[17]=[s("i",{class:"fas fa-play me-1"},null,-1),l(" Validierung starten ",-1)])]),_:1})])]),s("div",me,[s("div",ge,[s("table",be,[t[23]||(t[23]=s("thead",{class:"table-dark"},[s("tr",null,[s("th",null,"ID"),s("th",null,"Typ"),s("th",null,"Patient"),s("th",null,"Untersuchungsdatum"),s("th",null,"Status"),s("th",null,"Validierung erforderlich"),s("th",null,"Aktionen")])],-1)),s("tbody",null,[x.value?(r(),d("tr",pe,[...t[19]||(t[19]=[s("td",{colspan:"7",class:"text-center"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Laden...")])],-1)])])):_.value.length===0?(r(),d("tr",_e,[...t[20]||(t[20]=[s("td",{colspan:"7",class:"text-center text-muted"},[s("i",{class:"fas fa-user-shield fa-2x mb-2"}),s("br"),l(" Keine Patientendaten zur Validierung verfügbar ")],-1)])])):(r(!0),d(D,{key:2},V(_.value,a=>(r(),d("tr",{key:a.id},[s("td",null,[s("code",null,i(a.id),1)]),s("td",null,[s("span",{class:b(["badge",a.content_type==="video"?"bg-primary":"bg-danger"])},[s("i",{class:b(a.content_type==="video"?"fas fa-video":"fas fa-file-pdf")},null,2),l(" "+i(a.content_type?.toUpperCase()||"UNBEKANNT"),1)],2)]),s("td",null,i(a.patient_first_name)+" "+i(a.patient_last_name),1),s("td",null,i(j(a.examination_date)),1),s("td",null,[s("span",{class:b(["badge",B(a.anonymization_status)])},i(q(a.anonymization_status)),3)]),s("td",null,[s("span",{class:b(a.requires_validation?"text-warning":"text-success")},[s("i",{class:b(a.requires_validation?"fas fa-exclamation-triangle":"fas fa-check-circle")},null,2),l(" "+i(a.requires_validation?"Ja":"Nein"),1)],2)]),s("td",null,[s("div",he,[s("button",{class:"btn btn-outline-primary",onClick:u=>R(a),title:"Patientendaten validieren"},[...t[21]||(t[21]=[s("i",{class:"fas fa-edit"},null,-1)])],8,fe),s("button",{class:"btn btn-outline-success",onClick:u=>Y(a),disabled:!a.requires_validation,title:"Als validiert markieren"},[...t[22]||(t[22]=[s("i",{class:"fas fa-check"},null,-1)])],8,ye)])])]))),128))])])])])])])])])}}},we=W(ke,[["__scopeId","data-v-8cc1fc87"]]);export{we as D};
