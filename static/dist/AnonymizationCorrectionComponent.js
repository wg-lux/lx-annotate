import{d as ye,g as he,h as r,e as I,i as ke,w as _e,c as d,a as e,k as i,C as x,t as v,F as Z,j as E,l as p,v as R,H as z,L as N,p as we,m as Ve,y as Me,z as f,A as y,o as u,_ as Fe}from"./main.js";import{u as Se}from"./mediaTypeStore.js";const xe={class:"container-fluid py-4"},Ee={class:"card"},Ce={class:"card-header pb-0 d-flex justify-content-between align-items-center"},Ne={class:"d-flex gap-2"},Ue=["disabled"],ze={class:"card-body"},Pe={key:0,class:"text-center py-5"},De={key:1,class:"alert alert-danger",role:"alert"},Be={key:2,class:"alert alert-info",role:"alert"},$e={class:"row mb-4"},Ae={class:"col-12"},Ie={class:"card bg-light"},Re={class:"card-body"},Le={class:"row"},Te={class:"col-md-8"},Oe={class:"card-title"},He={class:"row"},je={class:"col-sm-6"},Ge={class:"mb-1"},We={class:"mb-1"},Xe={class:"mb-1"},Ye={class:"col-sm-6"},Ke={class:"mb-1"},Ze={class:"mb-1"},qe={class:"mb-1"},Je={class:"col-md-4 text-end"},Qe={class:"d-flex flex-column gap-2"},es=["disabled"],ss=["disabled"],ts={class:"row mb-4"},as={class:"col-md-6"},os={class:"card h-100"},ns={class:"card-body"},ls={class:"mb-3"},is={key:0,class:"mb-3"},rs={key:1,class:"mb-3"},ds={class:"row"},us={class:"col-6"},cs={class:"col-6"},ms={class:"row mt-2"},vs={class:"col-6"},ps={class:"col-6"},bs={class:"mb-3"},gs={class:"form-check"},fs={class:"form-check"},ys=["disabled"],hs={key:0},ks={key:1},_s={class:"col-md-6"},ws={class:"card h-100"},Vs={class:"card-body"},Ms={class:"mb-3"},Fs={class:"form-check"},Ss={class:"form-check"},xs={key:0,class:"mb-3"},Es={key:1,class:"mb-3"},Cs={class:"mb-3"},Ns={class:"form-check"},Us={class:"form-check"},zs=["disabled"],Ps={key:0},Ds={key:1},Bs={key:0,class:"row mb-4"},$s={class:"col-12"},As={class:"card border-warning"},Is={class:"card-body"},Rs={class:"d-flex align-items-center"},Ls={class:"flex-grow-1"},Ts={class:"mb-1"},Os={class:"progress",style:{height:"8px"}},Hs={class:"text-muted mt-1"},js={class:"row"},Gs={class:"col-12"},Ws={class:"card"},Xs={class:"card-header"},Ys={class:"d-flex gap-2 mt-2"},Ks=["disabled"],Zs={class:"card-body"},qs={class:"video-container"},Js=["src"],Qs={class:"mt-3 d-flex justify-content-between align-items-center"},et={class:"d-flex gap-2"},st={class:"text-muted"},tt={key:1,class:"row mt-4"},at={class:"col-12"},ot={class:"card"},nt={class:"card-body"},lt={class:"table-responsive"},it={class:"table table-sm"},rt={class:"text-muted"},dt=["onClick"],ut=ye({__name:"AnonymizationCorrectionComponent",props:{fileId:{}},setup(q){const J=Me();he();const Q=Se(),D=r(!1),g=r(""),P=r(!1),c=r(!1),b=r(""),h=r(0),k=r(""),C=r("original"),B=r(null),n=r(null);r(null);const M=r({sensitiveFrameCount:null,totalFrames:null,sensitiveRatio:null,duration:null,resolution:null});r({patientFirstName:"",patientLastName:"",patientGender:"",patientDob:"",casenumber:"",examiner:"",centerName:"",endoscopeType:"",endoscopeSn:""}),r(""),r(!1),r({firstNamePseudonym:"",lastNamePseudonym:"",originalFirstName:"",originalLastName:""});const o=r({type:"device_default",deviceName:"olympus_cv_1500",processingMethod:"streaming",endoscopeX:550,endoscopeY:0,endoscopeWidth:1350,endoscopeHeight:1080}),l=r({selectionMethod:"automatic",detectionEngine:"minicpm",processingMethod:"streaming",manualFrames:""}),F=r([]),ee=I(()=>n.value&&!c.value&&(o.value.type!=="custom"||o.value.endoscopeX>=0&&o.value.endoscopeY>=0&&o.value.endoscopeWidth>0&&o.value.endoscopeHeight>0)),se=I(()=>n.value&&!c.value&&(l.value.selectionMethod!=="manual"||l.value.manualFrames.trim().length>0)),L=I(()=>F.value.some(t=>t.status==="success"&&t.outputPath)),U=q,te=()=>{J.push("/anonymisierung/uebersicht")},$=async()=>{n.value?n.value.id=U.fileId:n.value={id:U.fileId},P.value=!0;try{await A(n.value.id)}finally{P.value=!1}},A=async t=>{D.value=!0,g.value="";try{const[s,a,m]=await Promise.all([f.get(y(`media/videos/video-correction/${t}/`)),f.get(y(`media/videos/${t}/metadata/`)),f.get(y(`media/videos/${t}/processing-history/`))]);n.value=s.data,M.value=a.data,F.value=m.data,n.value&&Q.setCurrentItem(n.value)}catch(s){g.value=s.response?.data?.error||"Fehler beim Laden der Video-Details",console.error("Error loading video details:",s)}finally{D.value=!1}},ae=async()=>{if(n.value){c.value=!0,b.value="analysis",h.value=0,k.value="Video wird analysiert...";try{const t=await f.post(y(`media/videos/${n.value.id}/analyze/`),{use_minicpm:l.value.detectionEngine!=="traditional",detailed_analysis:!0});M.value={...M.value,...t.data},h.value=100,k.value="Analyse abgeschlossen",F.value.unshift({id:Date.now(),timestamp:new Date().toISOString(),operation:"analysis",status:"success",details:`${t.data.sensitiveFrameCount||0} sensible Frames gefunden`})}catch(t){g.value=t.response?.data?.error||"Fehler bei der Video-Analyse",console.error("Error analyzing video:",t)}finally{c.value=!1,b.value=""}}},oe=async()=>{if(n.value){c.value=!0,b.value="masking",h.value=0,k.value="Maskierung wird vorbereitet...";try{const t={mask_type:o.value.type,device_name:o.value.deviceName,use_streaming:o.value.processingMethod==="streaming",custom_mask:o.value.type==="custom"?{endoscope_x:o.value.endoscopeX,endoscope_y:o.value.endoscopeY,endoscope_width:o.value.endoscopeWidth,endoscope_height:o.value.endoscopeHeight}:void 0},a=(await f.post(y(`media/videos/${n.value.id}/apply-mask/`),t)).data.task_id;await T(a,"masking")}catch(t){g.value=t.response?.data?.error||"Fehler bei der Maskierung",console.error("Error applying mask:",t),c.value=!1,b.value=""}}},ne=async()=>{if(n.value){c.value=!0,b.value="frame_removal",h.value=0,k.value="Frame-Entfernung wird vorbereitet...";try{const t={selection_method:l.value.selectionMethod,detection_engine:l.value.detectionEngine,use_streaming:l.value.processingMethod==="streaming",manual_frames:l.value.selectionMethod==="manual"?le(l.value.manualFrames):void 0},a=(await f.post(y(`media/videos/${n.value.id}/remove-frames/`),t)).data.task_id;await T(a,"frame_removal")}catch(t){g.value=t.response?.data?.error||"Fehler bei der Frame-Entfernung",console.error("Error removing frames:",t),c.value=!1,b.value=""}}},le=t=>{const s=[],a=t.split(",");for(const m of a){const _=m.trim();if(_.includes("-")){const[w,S]=_.split("-").map(V=>parseInt(V.trim()));if(!isNaN(w)&&!isNaN(S))for(let V=w;V<=S;V++)s.push(V)}else{const w=parseInt(_);isNaN(w)||s.push(w)}}return[...new Set(s)].sort((m,_)=>m-_)},T=async(t,s)=>{let _=0;const w=async()=>{if(_>=300)throw new Error("Zeitüberschreitung bei der Verarbeitung");try{const S=await f.get(y(`media/videos/task-status/${t}/`)),{status:V,progress:fe,message:Y,result:K}=S.data;if(h.value=fe||0,k.value=Y||"Verarbeitung läuft...",V==="SUCCESS"){h.value=100,k.value="Verarbeitung abgeschlossen",F.value.unshift({id:Date.now(),timestamp:new Date().toISOString(),operation:s,status:"success",details:K?.summary||"Verarbeitung erfolgreich",outputPath:K?.output_path}),await $(),c.value=!1,b.value="";return}if(V==="FAILURE")throw new Error(Y||"Verarbeitung fehlgeschlagen");_++,setTimeout(w,5e3)}catch(S){throw console.error("Polling error:",S),S}};await w()},ie=async()=>{c.value=!1,b.value="",h.value=0,k.value=""},re=async()=>{if(n.value)try{await f.post(y(`media/videos/${n.value.id}/reprocess/`)),await $()}catch(t){g.value=t.response?.data?.error||"Fehler bei der Neuverarbeitung",console.error("Error reprocessing video:",t)}},O=()=>{if(!n.value)return"";const t="http://localhost:8000";if(C.value==="processed"&&L.value){const s=F.value.filter(a=>a.status==="success"&&a.outputPath).sort((a,m)=>new Date(m.timestamp).getTime()-new Date(a.timestamp).getTime())[0];if(s)return`${t}/api/media/videos/processed-videos/${n.value.id}/${s.id}/`}return`${t}/api/media/videos/${n.value.id}/`},H=t=>{B.value&&(B.value.currentTime+=t)},de=async t=>{if(n.value)try{const s=await f.get(y(`video-download-processed/${n.value.id}/`),{params:{path:t},responseType:"blob"}),a=window.URL.createObjectURL(new Blob([s.data])),m=document.createElement("a");m.href=a,m.setAttribute("download",`${n.value.filename}_processed.mp4`),document.body.appendChild(m),m.click(),m.remove(),window.URL.revokeObjectURL(a)}catch(s){g.value=s.response?.data?.error||"Fehler beim Download",console.error("Error downloading result:",s)}},ue=t=>{console.error("Video loading error:",t);const s=t.target;console.error("Video error details:",{error:s.error,networkState:s.networkState,readyState:s.readyState,currentSrc:s.currentSrc})},ce=()=>{console.log("Video loading started for:",O())},me=()=>{console.log("Video can play, loaded successfully")},ve=t=>{if(!t)return"Unbekannt";const s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,a)*100)/100+" "+s[a]},j=t=>t?new Date(t).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",pe=t=>t==null?"Unbekannt":`${(t*100).toFixed(1)}%`,G=t=>({not_started:"bg-secondary",processing:"bg-warning",done:"bg-success",failed:"bg-danger",success:"bg-success"})[t]||"bg-secondary",W=t=>({not_started:"Nicht gestartet",processing:"In Bearbeitung",done:"Fertig",failed:"Fehlgeschlagen",success:"Erfolgreich"})[t]||t,be=t=>t==null?"badge bg-secondary":t>.1?"badge bg-danger":t>.05?"badge bg-warning":"badge bg-success",X=t=>({analysis:"Video-Analyse",masking:"Maskierung",frame_removal:"Frame-Entfernung",reprocessing:"Neuverarbeitung"})[t]||t,ge=t=>({analysis:"bg-info",masking:"bg-warning",frame_removal:"bg-danger",reprocessing:"bg-primary"})[t]||"bg-secondary";return ke(async()=>{isNaN(U.fileId)?g.value="Ungültige Datei-ID":await A(U.fileId)}),_e(()=>U.fileId,async t=>{t&&!isNaN(t)&&await A(t)}),(t,s)=>(u(),d("div",xe,[e("div",Ee,[e("div",Ce,[s[20]||(s[20]=e("h4",{class:"mb-0"},"Anonymisierungskorrektur",-1)),e("div",Ne,[e("button",{class:"btn btn-outline-secondary btn-sm",onClick:te},[...s[18]||(s[18]=[e("i",{class:"fas fa-arrow-left me-1"},null,-1),i(" Zurück zur Übersicht ",-1)])]),e("button",{class:"btn btn-outline-primary btn-sm",onClick:$,disabled:P.value},[e("i",{class:x(["fas fa-sync-alt",{"fa-spin":P.value}])},null,2),s[19]||(s[19]=i(" Aktualisieren ",-1))],8,Ue)])]),e("div",ze,[D.value?(u(),d("div",Pe,[...s[21]||(s[21]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Wird geladen...")],-1),e("p",{class:"mt-2"},"Video wird geladen...",-1)])])):g.value?(u(),d("div",De,[s[22]||(s[22]=e("strong",null,"Fehler:",-1)),i(" "+v(g.value),1)])):n.value?(u(),d(Z,{key:3},[e("div",$e,[e("div",Ae,[e("div",Ie,[e("div",Re,[e("div",Le,[e("div",Te,[e("h5",Oe,v(n.value.filename),1),e("div",He,[e("div",je,[e("p",Ge,[s[24]||(s[24]=e("strong",null,"Status:",-1)),e("span",{class:x([G(n.value.anonymizationStatus),"badge ms-1"])},v(W(n.value.anonymizationStatus)),3)]),e("p",We,[s[25]||(s[25]=e("strong",null,"Größe:",-1)),i(" "+v(ve(n.value.fileSize??null)),1)]),e("p",Xe,[s[26]||(s[26]=e("strong",null,"Erstellt:",-1)),i(" "+v(j(n.value.createdAt)),1)])]),e("div",Ye,[e("p",Ke,[s[27]||(s[27]=e("strong",null,"Sensitive Frames:",-1)),i(" "+v(M.value.sensitiveFrameCount||"Unbekannt"),1)]),e("p",Ze,[s[28]||(s[28]=e("strong",null,"Gesamte Frames:",-1)),i(" "+v(M.value.totalFrames||"Unbekannt"),1)]),e("p",qe,[s[29]||(s[29]=e("strong",null,"Sensitive Ratio:",-1)),e("span",{class:x(be(M.value.sensitiveRatio))},v(pe(M.value.sensitiveRatio)),3)])])])]),e("div",Je,[e("div",Qe,[e("button",{class:"btn btn-outline-info btn-sm",onClick:ae,disabled:c.value},[...s[30]||(s[30]=[e("i",{class:"fas fa-search me-1"},null,-1),i(" Video analysieren ",-1)])],8,es),e("button",{class:"btn btn-outline-warning btn-sm",onClick:re,disabled:c.value},[...s[31]||(s[31]=[e("i",{class:"fas fa-redo me-1"},null,-1),i(" Erneut verarbeiten ",-1)])],8,ss)])])])])])])]),e("div",ts,[e("div",as,[e("div",os,[s[46]||(s[46]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-mask me-2"}),i(" Video Maskierung ")])],-1)),e("div",ns,[s[45]||(s[45]=e("p",{class:"text-muted mb-3"}," Empfohlen bei hoher Sensitivität (>10%). Verdeckt sensible Bereiche dauerhaft. ",-1)),e("div",ls,[s[33]||(s[33]=e("label",{class:"form-label"},"Maskierungstyp:",-1)),p(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.value.type=a),class:"form-select"},[...s[32]||(s[32]=[e("option",{value:"device_default"},"Gerätespezifische Maske",-1),e("option",{value:"roi_based"},"ROI-basierte Maske",-1),e("option",{value:"custom"},"Benutzerdefiniert",-1)])],512),[[R,o.value.type]])]),o.value.type==="device_default"?(u(),d("div",is,[s[35]||(s[35]=e("label",{class:"form-label"},"Endoskop-Gerät:",-1)),p(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>o.value.deviceName=a),class:"form-select"},[...s[34]||(s[34]=[e("option",{value:"olympus_cv_1500"},"Olympus CV-1500",-1),e("option",{value:"olympus_cv_190"},"Olympus CV-190",-1),e("option",{value:"pentax_epk_i7010"},"Pentax EPK-i7010",-1),e("option",{value:"fujifilm_vp_4450hd"},"Fujifilm VP-4450HD",-1)])],512),[[R,o.value.deviceName]])])):E("",!0),o.value.type==="custom"?(u(),d("div",rs,[e("div",ds,[e("div",us,[s[36]||(s[36]=e("label",{class:"form-label"},"Endoskop X:",-1)),p(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=a=>o.value.endoscopeX=a),class:"form-control",min:"0"},null,512),[[z,o.value.endoscopeX,void 0,{number:!0}]])]),e("div",cs,[s[37]||(s[37]=e("label",{class:"form-label"},"Endoskop Y:",-1)),p(e("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=a=>o.value.endoscopeY=a),class:"form-control",min:"0"},null,512),[[z,o.value.endoscopeY,void 0,{number:!0}]])])]),e("div",ms,[e("div",vs,[s[38]||(s[38]=e("label",{class:"form-label"},"Breite:",-1)),p(e("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=a=>o.value.endoscopeWidth=a),class:"form-control",min:"1"},null,512),[[z,o.value.endoscopeWidth,void 0,{number:!0}]])]),e("div",ps,[s[39]||(s[39]=e("label",{class:"form-label"},"Höhe:",-1)),p(e("input",{type:"number","onUpdate:modelValue":s[5]||(s[5]=a=>o.value.endoscopeHeight=a),class:"form-control",min:"1"},null,512),[[z,o.value.endoscopeHeight,void 0,{number:!0}]])])])])):E("",!0),e("div",bs,[s[42]||(s[42]=e("label",{class:"form-label"},"Verarbeitungsmethode:",-1)),e("div",gs,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[6]||(s[6]=a=>o.value.processingMethod=a),value:"streaming",id:"maskStreaming"},null,512),[[N,o.value.processingMethod]]),s[40]||(s[40]=e("label",{class:"form-check-label",for:"maskStreaming"},[e("strong",null,"Streaming (Empfohlen)"),i(" - Schnelle Verarbeitung mit Named Pipes ")],-1))]),e("div",fs,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[7]||(s[7]=a=>o.value.processingMethod=a),value:"direct",id:"maskDirect"},null,512),[[N,o.value.processingMethod]]),s[41]||(s[41]=e("label",{class:"form-check-label",for:"maskDirect"}," Direkte Verarbeitung - Für spezielle Anforderungen ",-1))])]),e("button",{class:"btn btn-warning w-100",onClick:oe,disabled:c.value||!ee.value},[s[44]||(s[44]=e("i",{class:"fas fa-mask me-2"},null,-1)),c.value&&b.value==="masking"?(u(),d("span",hs,[...s[43]||(s[43]=[e("i",{class:"fas fa-spinner fa-spin me-1"},null,-1),i(" Maskierung wird angewendet... ",-1)])])):(u(),d("span",ks," Maskierung anwenden "))],8,ys)])])]),e("div",_s,[e("div",ws,[s[60]||(s[60]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-cut me-2"}),i(" Frame-Entfernung ")])],-1)),e("div",Vs,[s[59]||(s[59]=e("p",{class:"text-muted mb-3"}," Empfohlen bei niedriger Sensitivität (≤10%). Entfernt einzelne sensible Frames. ",-1)),e("div",Ms,[s[49]||(s[49]=e("label",{class:"form-label"},"Frame-Auswahl:",-1)),e("div",Fs,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[8]||(s[8]=a=>l.value.selectionMethod=a),value:"automatic",id:"frameAutomatic"},null,512),[[N,l.value.selectionMethod]]),s[47]||(s[47]=e("label",{class:"form-check-label",for:"frameAutomatic"},[e("strong",null,"Automatisch"),i(" - KI-basierte Erkennung sensibler Frames ")],-1))]),e("div",Ss,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[9]||(s[9]=a=>l.value.selectionMethod=a),value:"manual",id:"frameManual"},null,512),[[N,l.value.selectionMethod]]),s[48]||(s[48]=e("label",{class:"form-check-label",for:"frameManual"}," Manuell - Eigene Frame-Liste eingeben ",-1))])]),l.value.selectionMethod==="manual"?(u(),d("div",xs,[s[50]||(s[50]=e("label",{class:"form-label"},"Frame-Nummern (kommagetrennt):",-1)),p(e("textarea",{"onUpdate:modelValue":s[10]||(s[10]=a=>l.value.manualFrames=a),class:"form-control",rows:"3",placeholder:"z.B. 10,25,30-35,100"},null,512),[[z,l.value.manualFrames]]),s[51]||(s[51]=e("small",{class:"form-text text-muted"}," Unterstützt einzelne Frames (10) und Bereiche (30-35) ",-1))])):E("",!0),l.value.selectionMethod==="automatic"?(u(),d("div",Es,[s[53]||(s[53]=e("label",{class:"form-label"},"Erkennungs-Engine:",-1)),p(e("select",{"onUpdate:modelValue":s[11]||(s[11]=a=>l.value.detectionEngine=a),class:"form-select"},[...s[52]||(s[52]=[e("option",{value:"minicpm"},"MiniCPM-o 2.6 (Empfohlen)",-1),e("option",{value:"traditional"},"Traditionell (OCR + LLM)",-1),e("option",{value:"hybrid"},"Hybrid (Beide kombiniert)",-1)])],512),[[R,l.value.detectionEngine]])])):E("",!0),e("div",Cs,[s[56]||(s[56]=e("label",{class:"form-label"},"Verarbeitungsmethode:",-1)),e("div",Ns,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[12]||(s[12]=a=>l.value.processingMethod=a),value:"streaming",id:"frameStreaming"},null,512),[[N,l.value.processingMethod]]),s[54]||(s[54]=e("label",{class:"form-check-label",for:"frameStreaming"},[e("strong",null,"Streaming (Empfohlen)"),i(" - Bis zu 10x schneller ")],-1))]),e("div",Us,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[13]||(s[13]=a=>l.value.processingMethod=a),value:"traditional",id:"frameTraditional"},null,512),[[N,l.value.processingMethod]]),s[55]||(s[55]=e("label",{class:"form-check-label",for:"frameTraditional"}," Traditionell - Für Kompatibilität ",-1))])]),e("button",{class:"btn btn-danger w-100",onClick:ne,disabled:c.value||!se.value},[s[58]||(s[58]=e("i",{class:"fas fa-cut me-2"},null,-1)),c.value&&b.value==="frame_removal"?(u(),d("span",Ps,[...s[57]||(s[57]=[e("i",{class:"fas fa-spinner fa-spin me-1"},null,-1),i(" Frames werden entfernt... ",-1)])])):(u(),d("span",Ds," Frames entfernen "))],8,zs)])])])]),c.value?(u(),d("div",Bs,[e("div",$s,[e("div",As,[e("div",Is,[e("div",Rs,[s[62]||(s[62]=e("div",{class:"spinner-border spinner-border-sm text-warning me-3",role:"status"},[e("span",{class:"visually-hidden"},"Verarbeitung...")],-1)),e("div",Ls,[e("h6",Ts,v(X(b.value)),1),e("div",Os,[e("div",{class:"progress-bar progress-bar-striped progress-bar-animated",style:we({width:h.value+"%"})},null,4)]),e("small",Hs,v(k.value),1)]),e("button",{class:"btn btn-outline-danger btn-sm",onClick:ie},[...s[61]||(s[61]=[e("i",{class:"fas fa-times me-1"},null,-1),i(" Abbrechen ",-1)])])])])])])])):E("",!0),e("div",js,[e("div",Gs,[e("div",Ws,[e("div",Xs,[s[63]||(s[63]=e("h5",{class:"mb-0"},"Video-Vorschau",-1)),e("div",Ys,[e("button",{class:x(["btn btn-sm",C.value==="original"?"btn-primary":"btn-outline-primary"]),onClick:s[14]||(s[14]=a=>C.value="original")}," Original ",2),e("button",{class:x(["btn btn-sm",C.value==="processed"?"btn-primary":"btn-outline-primary"]),onClick:s[15]||(s[15]=a=>C.value="processed"),disabled:!L.value}," Verarbeitet ",10,Ks)])]),e("div",Zs,[e("div",qs,[e("video",{ref_key:"videoElement",ref:B,controls:"",width:"100%",height:"600px",src:O(),onError:ue,onLoadstart:ce,onCanplay:me}," Ihr Browser unterstützt dieses Video-Format nicht. ",40,Js)]),e("div",Qs,[e("div",et,[e("button",{class:"btn btn-outline-secondary btn-sm",onClick:s[16]||(s[16]=a=>H(-10))},[...s[64]||(s[64]=[e("i",{class:"fas fa-backward me-1"},null,-1),i(" -10s ",-1)])]),e("button",{class:"btn btn-outline-secondary btn-sm",onClick:s[17]||(s[17]=a=>H(10))},[...s[65]||(s[65]=[e("i",{class:"fas fa-forward me-1"},null,-1),i(" +10s ",-1)])])]),e("div",st,[e("small",null,v(C.value==="original"?"Original-Video":"Verarbeitetes Video"),1)])])])])])]),F.value.length?(u(),d("div",tt,[e("div",at,[e("div",ot,[s[68]||(s[68]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},"Verarbeitungsverlauf")],-1)),e("div",nt,[e("div",lt,[e("table",it,[s[67]||(s[67]=e("thead",null,[e("tr",null,[e("th",null,"Zeitstempel"),e("th",null,"Operation"),e("th",null,"Status"),e("th",null,"Details"),e("th",null,"Aktionen")])],-1)),e("tbody",null,[(u(!0),d(Z,null,Ve(F.value,a=>(u(),d("tr",{key:a.id},[e("td",null,v(j(a.timestamp)),1),e("td",null,[e("span",{class:x(["badge",ge(a.operation)])},v(X(a.operation)),3)]),e("td",null,[e("span",{class:x(["badge",G(a.status)])},v(W(a.status)),3)]),e("td",null,[e("small",rt,v(a.details),1)]),e("td",null,[a.status==="success"&&a.outputPath?(u(),d("button",{key:0,class:"btn btn-outline-primary btn-sm",onClick:m=>de(a.outputPath)},[...s[66]||(s[66]=[e("i",{class:"fas fa-download"},null,-1)])],8,dt)):E("",!0)])]))),128))])])])])])])])):E("",!0)],64)):(u(),d("div",Be,[...s[23]||(s[23]=[e("i",{class:"fas fa-info-circle me-2"},null,-1),i(" Kein Video ausgewählt. Bitte wählen Sie ein Video aus der Übersicht aus. ",-1)])]))])])]))}}),vt=Fe(ut,[["__scopeId","data-v-3feaa219"]]);export{vt as default};
