import{d as he,g as ke,h as r,e as I,i as _e,u as we,w as Ve,c as d,a as e,k as i,C as x,t as v,F as q,j as E,l as p,v as A,H as U,L as N,p as Me,m as Fe,y as Se,z as f,A as y,o as u,_ as xe}from"./main.js";import{u as Ee}from"./mediaTypeStore.js";const Ce={class:"container-fluid py-4"},Ne={class:"card"},Ue={class:"card-header pb-0 d-flex justify-content-between align-items-center"},ze={class:"d-flex gap-2"},Pe=["disabled"],Be={class:"card-body"},De={key:0,class:"text-center py-5"},$e={key:1,class:"alert alert-danger",role:"alert"},Ie={key:2,class:"alert alert-info",role:"alert"},Ae={class:"row mb-4"},Re={class:"col-12"},Le={class:"card bg-light"},Te={class:"card-body"},Oe={class:"row"},He={class:"col-md-8"},je={class:"card-title"},Ge={class:"row"},We={class:"col-sm-6"},Xe={class:"mb-1"},Ye={class:"mb-1"},Ke={class:"mb-1"},Ze={class:"col-sm-6"},qe={class:"mb-1"},Je={class:"mb-1"},Qe={class:"mb-1"},es={class:"col-md-4 text-end"},ss={class:"d-flex flex-column gap-2"},ts=["disabled"],as=["disabled"],os={class:"row mb-4"},ns={class:"col-md-6"},ls={class:"card h-100"},is={class:"card-body"},rs={class:"mb-3"},ds={key:0,class:"mb-3"},us={key:1,class:"mb-3"},cs={class:"row"},ms={class:"col-6"},vs={class:"col-6"},ps={class:"row mt-2"},bs={class:"col-6"},gs={class:"col-6"},fs={class:"mb-3"},ys={class:"form-check"},hs={class:"form-check"},ks=["disabled"],_s={key:0},ws={key:1},Vs={class:"col-md-6"},Ms={class:"card h-100"},Fs={class:"card-body"},Ss={class:"mb-3"},xs={class:"form-check"},Es={class:"form-check"},Cs={key:0,class:"mb-3"},Ns={key:1,class:"mb-3"},Us={class:"mb-3"},zs={class:"form-check"},Ps={class:"form-check"},Bs=["disabled"],Ds={key:0},$s={key:1},Is={key:0,class:"row mb-4"},As={class:"col-12"},Rs={class:"card border-warning"},Ls={class:"card-body"},Ts={class:"d-flex align-items-center"},Os={class:"flex-grow-1"},Hs={class:"mb-1"},js={class:"progress",style:{height:"8px"}},Gs={class:"text-muted mt-1"},Ws={class:"row"},Xs={class:"col-12"},Ys={class:"card"},Ks={class:"card-header"},Zs={class:"d-flex gap-2 mt-2"},qs=["disabled"],Js={class:"card-body"},Qs={class:"video-container"},et=["src"],st={class:"mt-3 d-flex justify-content-between align-items-center"},tt={class:"d-flex gap-2"},at={class:"text-muted"},ot={key:1,class:"row mt-4"},nt={class:"col-12"},lt={class:"card"},it={class:"card-body"},rt={class:"table-responsive"},dt={class:"table table-sm"},ut={class:"text-muted"},ct=["onClick"],mt=he({__name:"AnonymizationCorrectionComponent",props:{fileId:{}},setup(J){const Q=Se(),R=we();ke();const ee=Ee(),P=r(!1),g=r(""),z=r(!1),c=r(!1),b=r(""),h=r(0),k=r(""),C=r("original"),B=r(null),n=r(null);r(null);const M=r({sensitiveFrameCount:null,totalFrames:null,sensitiveRatio:null,duration:null,resolution:null});r({patientFirstName:"",patientLastName:"",patientGender:"",patientDob:"",casenumber:"",examiner:"",centerName:"",endoscopeType:"",endoscopeSn:""}),r(""),r(!1),r({firstNamePseudonym:"",lastNamePseudonym:"",originalFirstName:"",originalLastName:""});const o=r({type:"device_default",deviceName:"olympus_cv_1500",processingMethod:"streaming",endoscopeX:550,endoscopeY:0,endoscopeWidth:1350,endoscopeHeight:1080}),l=r({selectionMethod:"automatic",detectionEngine:"minicpm",processingMethod:"streaming",manualFrames:""}),F=r([]),se=I(()=>n.value&&!c.value&&(o.value.type!=="custom"||o.value.endoscopeX>=0&&o.value.endoscopeY>=0&&o.value.endoscopeWidth>0&&o.value.endoscopeHeight>0)),te=I(()=>n.value&&!c.value&&(l.value.selectionMethod!=="manual"||l.value.manualFrames.trim().length>0)),L=I(()=>F.value.some(t=>t.status==="success"&&t.outputPath)),T=J,ae=()=>{Q.push("/anonymisierung/uebersicht")},D=async()=>{n.value?n.value.id=T.fileId:n.value={id:T.fileId},z.value=!0;try{await $(n.value.id)}finally{z.value=!1}},$=async t=>{P.value=!0,g.value="";try{const[s,a,m]=await Promise.all([f.get(y(`media/videos/video-correction/${t}/`)),f.get(y(`media/videos/${t}/metadata/`)),f.get(y(`media/videos/${t}/processing-history/`))]);n.value=s.data,M.value=a.data,F.value=m.data,n.value&&ee.setCurrentItem(n.value)}catch(s){g.value=s.response?.data?.error||"Fehler beim Laden der Video-Details",console.error("Error loading video details:",s)}finally{P.value=!1}},oe=async()=>{if(n.value){c.value=!0,b.value="analysis",h.value=0,k.value="Video wird analysiert...";try{const t=await f.post(y(`media/videos/${n.value.id}/analyze/`),{use_minicpm:l.value.detectionEngine!=="traditional",detailed_analysis:!0});M.value={...M.value,...t.data},h.value=100,k.value="Analyse abgeschlossen",F.value.unshift({id:Date.now(),timestamp:new Date().toISOString(),operation:"analysis",status:"success",details:`${t.data.sensitiveFrameCount||0} sensible Frames gefunden`})}catch(t){g.value=t.response?.data?.error||"Fehler bei der Video-Analyse",console.error("Error analyzing video:",t)}finally{c.value=!1,b.value=""}}},ne=async()=>{if(n.value){c.value=!0,b.value="masking",h.value=0,k.value="Maskierung wird vorbereitet...";try{const t={mask_type:o.value.type,device_name:o.value.deviceName,use_streaming:o.value.processingMethod==="streaming",custom_mask:o.value.type==="custom"?{endoscope_x:o.value.endoscopeX,endoscope_y:o.value.endoscopeY,endoscope_width:o.value.endoscopeWidth,endoscope_height:o.value.endoscopeHeight}:void 0},a=(await f.post(y(`media/videos/${n.value.id}/apply-mask/`),t)).data.task_id;await O(a,"masking")}catch(t){g.value=t.response?.data?.error||"Fehler bei der Maskierung",console.error("Error applying mask:",t),c.value=!1,b.value=""}}},le=async()=>{if(n.value){c.value=!0,b.value="frame_removal",h.value=0,k.value="Frame-Entfernung wird vorbereitet...";try{const t={selection_method:l.value.selectionMethod,detection_engine:l.value.detectionEngine,use_streaming:l.value.processingMethod==="streaming",manual_frames:l.value.selectionMethod==="manual"?ie(l.value.manualFrames):void 0},a=(await f.post(y(`media/videos/${n.value.id}/remove-frames/`),t)).data.task_id;await O(a,"frame_removal")}catch(t){g.value=t.response?.data?.error||"Fehler bei der Frame-Entfernung",console.error("Error removing frames:",t),c.value=!1,b.value=""}}},ie=t=>{const s=[],a=t.split(",");for(const m of a){const _=m.trim();if(_.includes("-")){const[w,S]=_.split("-").map(V=>parseInt(V.trim()));if(!isNaN(w)&&!isNaN(S))for(let V=w;V<=S;V++)s.push(V)}else{const w=parseInt(_);isNaN(w)||s.push(w)}}return[...new Set(s)].sort((m,_)=>m-_)},O=async(t,s)=>{let _=0;const w=async()=>{if(_>=300)throw new Error("Zeitüberschreitung bei der Verarbeitung");try{const S=await f.get(y(`media/videos/task-status/${t}/`)),{status:V,progress:ye,message:K,result:Z}=S.data;if(h.value=ye||0,k.value=K||"Verarbeitung läuft...",V==="SUCCESS"){h.value=100,k.value="Verarbeitung abgeschlossen",F.value.unshift({id:Date.now(),timestamp:new Date().toISOString(),operation:s,status:"success",details:Z?.summary||"Verarbeitung erfolgreich",outputPath:Z?.output_path}),await D(),c.value=!1,b.value="";return}if(V==="FAILURE")throw new Error(K||"Verarbeitung fehlgeschlagen");_++,setTimeout(w,5e3)}catch(S){throw console.error("Polling error:",S),S}};await w()},re=async()=>{c.value=!1,b.value="",h.value=0,k.value=""},de=async()=>{if(n.value)try{await f.post(y(`media/videos/${n.value.id}/reprocess/`)),await D()}catch(t){g.value=t.response?.data?.error||"Fehler bei der Neuverarbeitung",console.error("Error reprocessing video:",t)}},H=()=>{if(!n.value)return"";const t="http://localhost:8000";if(C.value==="processed"&&L.value){const s=F.value.filter(a=>a.status==="success"&&a.outputPath).sort((a,m)=>new Date(m.timestamp).getTime()-new Date(a.timestamp).getTime())[0];if(s)return`${t}/api/media/videos/processed-videos/${n.value.id}/${s.id}/`}return`${t}/api/media/videos/${n.value.id}/`},j=t=>{B.value&&(B.value.currentTime+=t)},ue=async t=>{if(n.value)try{const s=await f.get(y(`video-download-processed/${n.value.id}/`),{params:{path:t},responseType:"blob"}),a=window.URL.createObjectURL(new Blob([s.data])),m=document.createElement("a");m.href=a,m.setAttribute("download",`${n.value.filename}_processed.mp4`),document.body.appendChild(m),m.click(),m.remove(),window.URL.revokeObjectURL(a)}catch(s){g.value=s.response?.data?.error||"Fehler beim Download",console.error("Error downloading result:",s)}},ce=t=>{console.error("Video loading error:",t);const s=t.target;console.error("Video error details:",{error:s.error,networkState:s.networkState,readyState:s.readyState,currentSrc:s.currentSrc})},me=()=>{console.log("Video loading started for:",H())},ve=()=>{console.log("Video can play, loaded successfully")},pe=t=>{if(!t)return"Unbekannt";const s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,a)*100)/100+" "+s[a]},G=t=>t?new Date(t).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",be=t=>t==null?"Unbekannt":`${(t*100).toFixed(1)}%`,W=t=>({not_started:"bg-secondary",processing:"bg-warning",done:"bg-success",failed:"bg-danger",success:"bg-success"})[t]||"bg-secondary",X=t=>({not_started:"Nicht gestartet",processing:"In Bearbeitung",done:"Fertig",failed:"Fehlgeschlagen",success:"Erfolgreich"})[t]||t,ge=t=>t==null?"badge bg-secondary":t>.1?"badge bg-danger":t>.05?"badge bg-warning":"badge bg-success",Y=t=>({analysis:"Video-Analyse",masking:"Maskierung",frame_removal:"Frame-Entfernung",reprocessing:"Neuverarbeitung"})[t]||t,fe=t=>({analysis:"bg-info",masking:"bg-warning",frame_removal:"bg-danger",reprocessing:"bg-primary"})[t]||"bg-secondary";return _e(async()=>{const t=R.params.id;t&&!isNaN(parseInt(t))?await $(parseInt(t)):g.value="Ungültige Video-ID"}),Ve(()=>R.params.id,async t=>{t&&!isNaN(parseInt(t))&&await $(parseInt(t))}),(t,s)=>(u(),d("div",Ce,[e("div",Ne,[e("div",Ue,[s[20]||(s[20]=e("h4",{class:"mb-0"},"Anonymisierungskorrektur",-1)),e("div",ze,[e("button",{class:"btn btn-outline-secondary btn-sm",onClick:ae},[...s[18]||(s[18]=[e("i",{class:"fas fa-arrow-left me-1"},null,-1),i(" Zurück zur Übersicht ",-1)])]),e("button",{class:"btn btn-outline-primary btn-sm",onClick:D,disabled:z.value},[e("i",{class:x(["fas fa-sync-alt",{"fa-spin":z.value}])},null,2),s[19]||(s[19]=i(" Aktualisieren ",-1))],8,Pe)])]),e("div",Be,[P.value?(u(),d("div",De,[...s[21]||(s[21]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Wird geladen...")],-1),e("p",{class:"mt-2"},"Video wird geladen...",-1)])])):g.value?(u(),d("div",$e,[s[22]||(s[22]=e("strong",null,"Fehler:",-1)),i(" "+v(g.value),1)])):n.value?(u(),d(q,{key:3},[e("div",Ae,[e("div",Re,[e("div",Le,[e("div",Te,[e("div",Oe,[e("div",He,[e("h5",je,v(n.value.filename),1),e("div",Ge,[e("div",We,[e("p",Xe,[s[24]||(s[24]=e("strong",null,"Status:",-1)),e("span",{class:x([W(n.value.anonymizationStatus),"badge ms-1"])},v(X(n.value.anonymizationStatus)),3)]),e("p",Ye,[s[25]||(s[25]=e("strong",null,"Größe:",-1)),i(" "+v(pe(n.value.fileSize??null)),1)]),e("p",Ke,[s[26]||(s[26]=e("strong",null,"Erstellt:",-1)),i(" "+v(G(n.value.createdAt)),1)])]),e("div",Ze,[e("p",qe,[s[27]||(s[27]=e("strong",null,"Sensitive Frames:",-1)),i(" "+v(M.value.sensitiveFrameCount||"Unbekannt"),1)]),e("p",Je,[s[28]||(s[28]=e("strong",null,"Gesamte Frames:",-1)),i(" "+v(M.value.totalFrames||"Unbekannt"),1)]),e("p",Qe,[s[29]||(s[29]=e("strong",null,"Sensitive Ratio:",-1)),e("span",{class:x(ge(M.value.sensitiveRatio))},v(be(M.value.sensitiveRatio)),3)])])])]),e("div",es,[e("div",ss,[e("button",{class:"btn btn-outline-info btn-sm",onClick:oe,disabled:c.value},[...s[30]||(s[30]=[e("i",{class:"fas fa-search me-1"},null,-1),i(" Video analysieren ",-1)])],8,ts),e("button",{class:"btn btn-outline-warning btn-sm",onClick:de,disabled:c.value},[...s[31]||(s[31]=[e("i",{class:"fas fa-redo me-1"},null,-1),i(" Erneut verarbeiten ",-1)])],8,as)])])])])])])]),e("div",os,[e("div",ns,[e("div",ls,[s[46]||(s[46]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-mask me-2"}),i(" Video Maskierung ")])],-1)),e("div",is,[s[45]||(s[45]=e("p",{class:"text-muted mb-3"}," Empfohlen bei hoher Sensitivität (>10%). Verdeckt sensible Bereiche dauerhaft. ",-1)),e("div",rs,[s[33]||(s[33]=e("label",{class:"form-label"},"Maskierungstyp:",-1)),p(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.value.type=a),class:"form-select"},[...s[32]||(s[32]=[e("option",{value:"device_default"},"Gerätespezifische Maske",-1),e("option",{value:"roi_based"},"ROI-basierte Maske",-1),e("option",{value:"custom"},"Benutzerdefiniert",-1)])],512),[[A,o.value.type]])]),o.value.type==="device_default"?(u(),d("div",ds,[s[35]||(s[35]=e("label",{class:"form-label"},"Endoskop-Gerät:",-1)),p(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>o.value.deviceName=a),class:"form-select"},[...s[34]||(s[34]=[e("option",{value:"olympus_cv_1500"},"Olympus CV-1500",-1),e("option",{value:"olympus_cv_190"},"Olympus CV-190",-1),e("option",{value:"pentax_epk_i7010"},"Pentax EPK-i7010",-1),e("option",{value:"fujifilm_vp_4450hd"},"Fujifilm VP-4450HD",-1)])],512),[[A,o.value.deviceName]])])):E("",!0),o.value.type==="custom"?(u(),d("div",us,[e("div",cs,[e("div",ms,[s[36]||(s[36]=e("label",{class:"form-label"},"Endoskop X:",-1)),p(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=a=>o.value.endoscopeX=a),class:"form-control",min:"0"},null,512),[[U,o.value.endoscopeX,void 0,{number:!0}]])]),e("div",vs,[s[37]||(s[37]=e("label",{class:"form-label"},"Endoskop Y:",-1)),p(e("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=a=>o.value.endoscopeY=a),class:"form-control",min:"0"},null,512),[[U,o.value.endoscopeY,void 0,{number:!0}]])])]),e("div",ps,[e("div",bs,[s[38]||(s[38]=e("label",{class:"form-label"},"Breite:",-1)),p(e("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=a=>o.value.endoscopeWidth=a),class:"form-control",min:"1"},null,512),[[U,o.value.endoscopeWidth,void 0,{number:!0}]])]),e("div",gs,[s[39]||(s[39]=e("label",{class:"form-label"},"Höhe:",-1)),p(e("input",{type:"number","onUpdate:modelValue":s[5]||(s[5]=a=>o.value.endoscopeHeight=a),class:"form-control",min:"1"},null,512),[[U,o.value.endoscopeHeight,void 0,{number:!0}]])])])])):E("",!0),e("div",fs,[s[42]||(s[42]=e("label",{class:"form-label"},"Verarbeitungsmethode:",-1)),e("div",ys,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[6]||(s[6]=a=>o.value.processingMethod=a),value:"streaming",id:"maskStreaming"},null,512),[[N,o.value.processingMethod]]),s[40]||(s[40]=e("label",{class:"form-check-label",for:"maskStreaming"},[e("strong",null,"Streaming (Empfohlen)"),i(" - Schnelle Verarbeitung mit Named Pipes ")],-1))]),e("div",hs,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[7]||(s[7]=a=>o.value.processingMethod=a),value:"direct",id:"maskDirect"},null,512),[[N,o.value.processingMethod]]),s[41]||(s[41]=e("label",{class:"form-check-label",for:"maskDirect"}," Direkte Verarbeitung - Für spezielle Anforderungen ",-1))])]),e("button",{class:"btn btn-warning w-100",onClick:ne,disabled:c.value||!se.value},[s[44]||(s[44]=e("i",{class:"fas fa-mask me-2"},null,-1)),c.value&&b.value==="masking"?(u(),d("span",_s,[...s[43]||(s[43]=[e("i",{class:"fas fa-spinner fa-spin me-1"},null,-1),i(" Maskierung wird angewendet... ",-1)])])):(u(),d("span",ws," Maskierung anwenden "))],8,ks)])])]),e("div",Vs,[e("div",Ms,[s[60]||(s[60]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-cut me-2"}),i(" Frame-Entfernung ")])],-1)),e("div",Fs,[s[59]||(s[59]=e("p",{class:"text-muted mb-3"}," Empfohlen bei niedriger Sensitivität (≤10%). Entfernt einzelne sensible Frames. ",-1)),e("div",Ss,[s[49]||(s[49]=e("label",{class:"form-label"},"Frame-Auswahl:",-1)),e("div",xs,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[8]||(s[8]=a=>l.value.selectionMethod=a),value:"automatic",id:"frameAutomatic"},null,512),[[N,l.value.selectionMethod]]),s[47]||(s[47]=e("label",{class:"form-check-label",for:"frameAutomatic"},[e("strong",null,"Automatisch"),i(" - KI-basierte Erkennung sensibler Frames ")],-1))]),e("div",Es,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[9]||(s[9]=a=>l.value.selectionMethod=a),value:"manual",id:"frameManual"},null,512),[[N,l.value.selectionMethod]]),s[48]||(s[48]=e("label",{class:"form-check-label",for:"frameManual"}," Manuell - Eigene Frame-Liste eingeben ",-1))])]),l.value.selectionMethod==="manual"?(u(),d("div",Cs,[s[50]||(s[50]=e("label",{class:"form-label"},"Frame-Nummern (kommagetrennt):",-1)),p(e("textarea",{"onUpdate:modelValue":s[10]||(s[10]=a=>l.value.manualFrames=a),class:"form-control",rows:"3",placeholder:"z.B. 10,25,30-35,100"},null,512),[[U,l.value.manualFrames]]),s[51]||(s[51]=e("small",{class:"form-text text-muted"}," Unterstützt einzelne Frames (10) und Bereiche (30-35) ",-1))])):E("",!0),l.value.selectionMethod==="automatic"?(u(),d("div",Ns,[s[53]||(s[53]=e("label",{class:"form-label"},"Erkennungs-Engine:",-1)),p(e("select",{"onUpdate:modelValue":s[11]||(s[11]=a=>l.value.detectionEngine=a),class:"form-select"},[...s[52]||(s[52]=[e("option",{value:"minicpm"},"MiniCPM-o 2.6 (Empfohlen)",-1),e("option",{value:"traditional"},"Traditionell (OCR + LLM)",-1),e("option",{value:"hybrid"},"Hybrid (Beide kombiniert)",-1)])],512),[[A,l.value.detectionEngine]])])):E("",!0),e("div",Us,[s[56]||(s[56]=e("label",{class:"form-label"},"Verarbeitungsmethode:",-1)),e("div",zs,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[12]||(s[12]=a=>l.value.processingMethod=a),value:"streaming",id:"frameStreaming"},null,512),[[N,l.value.processingMethod]]),s[54]||(s[54]=e("label",{class:"form-check-label",for:"frameStreaming"},[e("strong",null,"Streaming (Empfohlen)"),i(" - Bis zu 10x schneller ")],-1))]),e("div",Ps,[p(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[13]||(s[13]=a=>l.value.processingMethod=a),value:"traditional",id:"frameTraditional"},null,512),[[N,l.value.processingMethod]]),s[55]||(s[55]=e("label",{class:"form-check-label",for:"frameTraditional"}," Traditionell - Für Kompatibilität ",-1))])]),e("button",{class:"btn btn-danger w-100",onClick:le,disabled:c.value||!te.value},[s[58]||(s[58]=e("i",{class:"fas fa-cut me-2"},null,-1)),c.value&&b.value==="frame_removal"?(u(),d("span",Ds,[...s[57]||(s[57]=[e("i",{class:"fas fa-spinner fa-spin me-1"},null,-1),i(" Frames werden entfernt... ",-1)])])):(u(),d("span",$s," Frames entfernen "))],8,Bs)])])])]),c.value?(u(),d("div",Is,[e("div",As,[e("div",Rs,[e("div",Ls,[e("div",Ts,[s[62]||(s[62]=e("div",{class:"spinner-border spinner-border-sm text-warning me-3",role:"status"},[e("span",{class:"visually-hidden"},"Verarbeitung...")],-1)),e("div",Os,[e("h6",Hs,v(Y(b.value)),1),e("div",js,[e("div",{class:"progress-bar progress-bar-striped progress-bar-animated",style:Me({width:h.value+"%"})},null,4)]),e("small",Gs,v(k.value),1)]),e("button",{class:"btn btn-outline-danger btn-sm",onClick:re},[...s[61]||(s[61]=[e("i",{class:"fas fa-times me-1"},null,-1),i(" Abbrechen ",-1)])])])])])])])):E("",!0),e("div",Ws,[e("div",Xs,[e("div",Ys,[e("div",Ks,[s[63]||(s[63]=e("h5",{class:"mb-0"},"Video-Vorschau",-1)),e("div",Zs,[e("button",{class:x(["btn btn-sm",C.value==="original"?"btn-primary":"btn-outline-primary"]),onClick:s[14]||(s[14]=a=>C.value="original")}," Original ",2),e("button",{class:x(["btn btn-sm",C.value==="processed"?"btn-primary":"btn-outline-primary"]),onClick:s[15]||(s[15]=a=>C.value="processed"),disabled:!L.value}," Verarbeitet ",10,qs)])]),e("div",Js,[e("div",Qs,[e("video",{ref_key:"videoElement",ref:B,controls:"",width:"100%",height:"600px",src:H(),onError:ce,onLoadstart:me,onCanplay:ve}," Ihr Browser unterstützt dieses Video-Format nicht. ",40,et)]),e("div",st,[e("div",tt,[e("button",{class:"btn btn-outline-secondary btn-sm",onClick:s[16]||(s[16]=a=>j(-10))},[...s[64]||(s[64]=[e("i",{class:"fas fa-backward me-1"},null,-1),i(" -10s ",-1)])]),e("button",{class:"btn btn-outline-secondary btn-sm",onClick:s[17]||(s[17]=a=>j(10))},[...s[65]||(s[65]=[e("i",{class:"fas fa-forward me-1"},null,-1),i(" +10s ",-1)])])]),e("div",at,[e("small",null,v(C.value==="original"?"Original-Video":"Verarbeitetes Video"),1)])])])])])]),F.value.length?(u(),d("div",ot,[e("div",nt,[e("div",lt,[s[68]||(s[68]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},"Verarbeitungsverlauf")],-1)),e("div",it,[e("div",rt,[e("table",dt,[s[67]||(s[67]=e("thead",null,[e("tr",null,[e("th",null,"Zeitstempel"),e("th",null,"Operation"),e("th",null,"Status"),e("th",null,"Details"),e("th",null,"Aktionen")])],-1)),e("tbody",null,[(u(!0),d(q,null,Fe(F.value,a=>(u(),d("tr",{key:a.id},[e("td",null,v(G(a.timestamp)),1),e("td",null,[e("span",{class:x(["badge",fe(a.operation)])},v(Y(a.operation)),3)]),e("td",null,[e("span",{class:x(["badge",W(a.status)])},v(X(a.status)),3)]),e("td",null,[e("small",ut,v(a.details),1)]),e("td",null,[a.status==="success"&&a.outputPath?(u(),d("button",{key:0,class:"btn btn-outline-primary btn-sm",onClick:m=>ue(a.outputPath)},[...s[66]||(s[66]=[e("i",{class:"fas fa-download"},null,-1)])],8,ct)):E("",!0)])]))),128))])])])])])])])):E("",!0)],64)):(u(),d("div",Ie,[...s[23]||(s[23]=[e("i",{class:"fas fa-info-circle me-2"},null,-1),i(" Kein Video ausgewählt. Bitte wählen Sie ein Video aus der Übersicht aus. ",-1)])]))])])]))}}),bt=xe(mt,[["__scopeId","data-v-46e7dc17"]]);export{bt as default};
