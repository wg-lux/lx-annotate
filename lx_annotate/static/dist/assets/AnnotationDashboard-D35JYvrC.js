import{d as ns,B as W,e as k,i as X,w as as,c as d,j as Y,p as C,a as s,k as l,n as g,q as P,t as i,y as Z,o as r,_ as ss,f as is,h as I,b as D,C as G,r as os,F as E,m as L,z as $,A as Q}from"./main-DethiONo.js";const ls={class:"annotation-stats-overview"},ds={key:0,class:"text-center py-5"},rs={key:1},cs={class:"row mb-4"},us={class:"col-12"},vs={class:"card bg-gradient-primary text-white"},ms={class:"card-body"},gs={class:"row align-items-center"},bs={class:"col-4 text-end"},ps=["disabled"],_s={class:"row mb-4"},hs={class:"col-12"},fs={class:"card"},ys={class:"card-body"},ks={class:"progress-container"},xs={class:"progress mb-2",style:{height:"30px"}},ws=["aria-valuenow"],As={class:"progress-text"},Ss=["aria-valuenow"],$s={class:"progress-text"},Cs=["aria-valuenow"],Ps={class:"progress-text"},Is={class:"progress-legend d-flex justify-content-between"},Ms={class:"text-muted"},Ts={class:"text-muted"},Us={class:"row mb-4"},Vs={class:"col-md-4 mb-3"},Ds={class:"card-header bg-primary text-white"},Es={class:"d-flex justify-content-between align-items-center"},Ls={class:"badge bg-light text-primary"},Ns={class:"card-body"},zs={class:"stats-grid"},Fs={class:"stat-item pending"},Bs={class:"stat-info"},qs={class:"stat-number"},js={class:"stat-item in-progress"},Ks={class:"stat-info"},Rs={class:"stat-number"},Gs={class:"stat-item completed"},Js={class:"stat-info"},Hs={class:"stat-number"},Os={class:"mini-progress mt-3"},Qs={class:"progress",style:{height:"6px"}},Ws={class:"text-muted mt-1 d-block"},Xs={class:"col-md-4 mb-3"},Ys={class:"card-header bg-success text-white"},Zs={class:"d-flex justify-content-between align-items-center"},st={class:"badge bg-light text-success"},tt={class:"card-body"},et={class:"stats-grid"},nt={class:"stat-item pending"},at={class:"stat-info"},it={class:"stat-number"},ot={class:"stat-item in-progress"},lt={class:"stat-info"},dt={class:"stat-number"},rt={class:"stat-item completed"},ct={class:"stat-info"},ut={class:"stat-number"},vt={class:"mini-progress mt-3"},mt={class:"progress",style:{height:"6px"}},gt={class:"text-muted mt-1 d-block"},bt={class:"col-md-4 mb-3"},pt={class:"card-header bg-warning text-dark"},_t={class:"d-flex justify-content-between align-items-center"},ht={class:"badge bg-dark text-warning"},ft={class:"card-body"},yt={class:"stats-grid"},kt={class:"stat-item pending"},xt={class:"stat-info"},wt={class:"stat-number"},At={class:"stat-item in-progress"},St={class:"stat-info"},$t={class:"stat-number"},Ct={class:"stat-item completed"},Pt={class:"stat-info"},It={class:"stat-number"},Mt={class:"mini-progress mt-3"},Tt={class:"progress",style:{height:"6px"}},Ut={class:"text-muted mt-1 d-block"},Vt={key:2,class:"alert alert-danger mt-3"},Dt=ns({__name:"AnnotationStatsComponent",setup(ts){const x=Z(),o=W(),u=k(()=>({pending:o.stats.segmentPending||0,inProgress:o.stats.segmentInProgress||0,completed:o.stats.segmentCompleted||0,total:(o.stats.segmentPending||0)+(o.stats.segmentInProgress||0)+(o.stats.segmentCompleted||0)})),v=k(()=>({pending:o.stats.examinationPending||0,inProgress:o.stats.examinationInProgress||0,completed:o.stats.examinationCompleted||0,total:(o.stats.examinationPending||0)+(o.stats.examinationInProgress||0)+(o.stats.examinationCompleted||0)})),m=k(()=>({pending:o.stats.sensitiveMetaPending||0,inProgress:o.stats.sensitiveMetaInProgress||0,completed:o.stats.sensitiveMetaCompleted||0,total:(o.stats.sensitiveMetaPending||0)+(o.stats.sensitiveMetaInProgress||0)+(o.stats.sensitiveMetaCompleted||0)})),_=k(()=>o.completionPercentage||0),h=k(()=>o.inProgressPercentage||0),f=k(()=>o.pendingPercentage||0),A=k(()=>o.stats.totalAnnotations||0),N=k(()=>o.stats.totalAnnotations>0||o.lastUpdated!==null),M=k(()=>{if(!o.lastUpdated)return"Nie";const e=new Date().getTime()-o.lastUpdated.getTime(),S=Math.floor(e/6e4);if(S<1)return"Gerade eben";if(S<60)return`vor ${S} Min.`;const U=Math.floor(S/60);return U<24?`vor ${U} Std.`:`vor ${Math.floor(U/24)} Tag(en)`}),b=c=>c.total>0?Math.round(c.completed/c.total*100):0,T=async()=>{try{await o.forceRefresh()}catch(c){console.error("Failed to refresh stats:",c)}},z=()=>{const c=document.querySelector('[data-section="segments"]');c?c.scrollIntoView({behavior:"smooth"}):x.push("/segments")},F=()=>{x.push("/examinations")},B=()=>{x.push("/sensitive-meta")},q=()=>{x.push("/frame-annotation")},j=()=>{x.push("/examination")},K=()=>{x.push("/validation")};return X(async()=>{await o.fetchAnnotationStats()}),as(()=>o.needsRefresh,async c=>{c&&await o.refreshIfNeeded()}),(c,e)=>(r(),d("div",ls,[C(o).isLoading&&!N.value?(r(),d("div",ds,[...e[1]||(e[1]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Laden...")],-1),s("p",{class:"mt-3 text-muted"},"Statistiken werden geladen...",-1)])])):(r(),d("div",rs,[s("div",cs,[s("div",us,[s("div",vs,[s("div",ms,[s("div",gs,[e[3]||(e[3]=s("div",{class:"col-8"},[s("h4",{class:"text-white mb-1"},[s("i",{class:"fas fa-chart-pie me-2"}),l(" Annotation Übersicht ")]),s("p",{class:"text-white opacity-8 mb-0"}," Aktuell verfügbare Annotationen und deren Fortschritt ")],-1)),s("div",bs,[s("button",{class:"btn btn-outline-light btn-sm",onClick:T,disabled:C(o).isLoading},[s("i",{class:g(["fas fa-sync-alt",{"fa-spin":C(o).isLoading}])},null,2),e[2]||(e[2]=l(" Aktualisieren ",-1))],8,ps)])])])])])]),s("div",_s,[s("div",hs,[s("div",fs,[s("div",ys,[e[4]||(e[4]=s("h6",{class:"card-title mb-3"},[s("i",{class:"fas fa-tasks me-2"}),l(" Gesamtfortschritt ")],-1)),s("div",ks,[s("div",xs,[s("div",{class:"progress-bar bg-success",role:"progressbar",style:P({width:_.value+"%"}),"aria-valuenow":_.value,"aria-valuemin":"0","aria-valuemax":"100"},[s("span",As,i(_.value)+"% Abgeschlossen ",1)],12,ws),s("div",{class:"progress-bar bg-info",role:"progressbar",style:P({width:h.value+"%"}),"aria-valuenow":h.value,"aria-valuemin":"0","aria-valuemax":"100"},[s("span",$s,i(h.value)+"% In Bearbeitung ",1)],12,Ss),s("div",{class:"progress-bar bg-warning",role:"progressbar",style:P({width:f.value+"%"}),"aria-valuenow":f.value,"aria-valuemin":"0","aria-valuemax":"100"},[s("span",Ps,i(f.value)+"% Ausstehend ",1)],12,Cs)]),s("div",Is,[s("small",Ms," Total: "+i(A.value)+" Annotationen ",1),s("small",Ts," Letzte Aktualisierung: "+i(M.value),1)])])])])])]),s("div",Us,[s("div",Vs,[s("div",{class:"card h-100 annotation-type-card",onClick:z},[s("div",Ds,[s("div",Es,[e[5]||(e[5]=s("h6",{class:"mb-0"},[s("i",{class:"fas fa-video me-2"}),l(" Video-Segmente ")],-1)),s("span",Ls,i(u.value.total),1)])]),s("div",Ns,[s("div",zs,[s("div",Fs,[e[7]||(e[7]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-clock"})],-1)),s("div",Bs,[s("div",qs,i(u.value.pending),1),e[6]||(e[6]=s("div",{class:"stat-label"},"Ausstehend",-1))])]),s("div",js,[e[9]||(e[9]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-cogs"})],-1)),s("div",Ks,[s("div",Rs,i(u.value.inProgress),1),e[8]||(e[8]=s("div",{class:"stat-label"},"In Bearbeitung",-1))])]),s("div",Gs,[e[11]||(e[11]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",Js,[s("div",Hs,i(u.value.completed),1),e[10]||(e[10]=s("div",{class:"stat-label"},"Abgeschlossen",-1))])])]),s("div",Os,[s("div",Qs,[s("div",{class:"progress-bar bg-success",style:P({width:b(u.value)+"%"})},null,4)]),s("small",Ws,i(b(u.value))+"% abgeschlossen ",1)])])])]),s("div",Xs,[s("div",{class:"card h-100 annotation-type-card",onClick:F},[s("div",Ys,[s("div",Zs,[e[12]||(e[12]=s("h6",{class:"mb-0"},[s("i",{class:"fas fa-stethoscope me-2"}),l(" Untersuchungen ")],-1)),s("span",st,i(v.value.total),1)])]),s("div",tt,[s("div",et,[s("div",nt,[e[14]||(e[14]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-clock"})],-1)),s("div",at,[s("div",it,i(v.value.pending),1),e[13]||(e[13]=s("div",{class:"stat-label"},"Ausstehend",-1))])]),s("div",ot,[e[16]||(e[16]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-cogs"})],-1)),s("div",lt,[s("div",dt,i(v.value.inProgress),1),e[15]||(e[15]=s("div",{class:"stat-label"},"In Bearbeitung",-1))])]),s("div",rt,[e[18]||(e[18]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",ct,[s("div",ut,i(v.value.completed),1),e[17]||(e[17]=s("div",{class:"stat-label"},"Abgeschlossen",-1))])])]),s("div",vt,[s("div",mt,[s("div",{class:"progress-bar bg-success",style:P({width:b(v.value)+"%"})},null,4)]),s("small",gt,i(b(v.value))+"% abgeschlossen ",1)])])])]),s("div",bt,[s("div",{class:"card h-100 annotation-type-card",onClick:B},[s("div",pt,[s("div",_t,[e[19]||(e[19]=s("h6",{class:"mb-0"},[s("i",{class:"fas fa-user-shield me-2"}),l(" Patientendaten ")],-1)),s("span",ht,i(m.value.total),1)])]),s("div",ft,[s("div",yt,[s("div",kt,[e[21]||(e[21]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-clock"})],-1)),s("div",xt,[s("div",wt,i(m.value.pending),1),e[20]||(e[20]=s("div",{class:"stat-label"},"Ausstehend",-1))])]),s("div",At,[e[23]||(e[23]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-cogs"})],-1)),s("div",St,[s("div",$t,i(m.value.inProgress),1),e[22]||(e[22]=s("div",{class:"stat-label"},"In Bearbeitung",-1))])]),s("div",Ct,[e[25]||(e[25]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",Pt,[s("div",It,i(m.value.completed),1),e[24]||(e[24]=s("div",{class:"stat-label"},"Abgeschlossen",-1))])])]),s("div",Mt,[s("div",Tt,[s("div",{class:"progress-bar bg-success",style:P({width:b(m.value)+"%"})},null,4)]),s("small",Ut,i(b(m.value))+"% abgeschlossen ",1)])])])])]),s("div",{class:"row"},[s("div",{class:"col-12"},[s("div",{class:"card"},[e[29]||(e[29]=s("div",{class:"card-header"},[s("h6",{class:"mb-0"},[s("i",{class:"fas fa-bolt me-2"}),l(" Schnellaktionen ")])],-1)),s("div",{class:"card-body"},[s("div",{class:"row"},[s("div",{class:"col-md-4"},[s("div",{class:"quick-action-item",onClick:q},[...e[26]||(e[26]=[s("div",{class:"action-icon bg-primary"},[s("i",{class:"fas fa-plus"})],-1),s("div",{class:"action-content"},[s("h6",null,"Neue Video-Annotation"),s("small",{class:"text-muted"},"Frame-Annotation starten")],-1)])])]),s("div",{class:"col-md-4"},[s("div",{class:"quick-action-item",onClick:j},[...e[27]||(e[27]=[s("div",{class:"action-icon bg-success"},[s("i",{class:"fas fa-plus"})],-1),s("div",{class:"action-content"},[s("h6",null,"Neue Untersuchung"),s("small",{class:"text-muted"},"Untersuchung erstellen")],-1)])])]),s("div",{class:"col-md-4"},[s("div",{class:"quick-action-item",onClick:K},[...e[28]||(e[28]=[s("div",{class:"action-icon bg-warning"},[s("i",{class:"fas fa-play"})],-1),s("div",{class:"action-content"},[s("h6",null,"Validierung starten"),s("small",{class:"text-muted"},"Patientendaten validieren")],-1)])])])])])])])])])),C(o).hasError?(r(),d("div",Vt,[e[30]||(e[30]=s("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),e[31]||(e[31]=s("strong",null,"Fehler beim Laden der Statistiken:",-1)),l(" "+i(C(o).error)+" ",1),s("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=S=>C(o).clearError())})])):Y("",!0)]))}}),Et=ss(Dt,[["__scopeId","data-v-bebe887d"]]),Lt={class:"container-fluid py-4"},Nt={class:"row mt-4"},zt={class:"col-12 mb-4"},Ft={class:"card"},Bt={class:"card-header d-flex justify-content-between align-items-center"},qt={class:"header-actions"},jt=["disabled"],Kt={class:"card-body"},Rt={class:"table-responsive"},Gt={class:"table table-hover"},Jt={key:0},Ht={key:1},Ot={class:"badge bg-info"},Qt={class:"btn-group btn-group-sm"},Wt=["onClick"],Xt=["onClick","disabled"],Yt={class:"col-12 mb-4"},Zt={class:"card"},se={class:"card-header d-flex justify-content-between align-items-center"},te={class:"header-actions"},ee=["disabled"],ne={class:"card-body"},ae={class:"table-responsive"},ie={class:"table table-hover"},oe={key:0},le={key:1},de={key:0,class:"badge bg-light text-dark"},re={class:"btn-group btn-group-sm"},ce=["onClick"],ue=["onClick","disabled"],ve={class:"col-12 mb-4"},me={class:"card"},ge={class:"card-header d-flex justify-content-between align-items-center"},be={class:"header-actions"},pe=["disabled"],_e={class:"card-body"},he={class:"table-responsive"},fe={class:"table table-hover"},ye={key:0},ke={key:1},xe={class:"btn-group btn-group-sm"},we=["onClick"],Ae=["onClick","disabled"],Se={__name:"AnnotationDashboard",setup(ts){const x=is(),o=Z(),u=W(),v=I([]),m=I([]),_=I([]),h=I(!1),f=I(!1),A=I(!1),N=n=>{console.error(n),x.error(n)},M=async()=>{h.value=!0;try{const n=await $.get("/api/media/videos/segments/");v.value=n.data.results||n.data||[]}catch{N("Fehler beim Laden der Video-Segmente"),v.value=[]}finally{h.value=!1}},b=async()=>{f.value=!0;try{const n=await $.get("/api/examinations/");m.value=n.data.results||n.data||[]}catch(n){console.error("Fehler beim Laden der Untersuchungen:",n),m.value=[]}finally{f.value=!1}},T=async()=>{var n;A.value=!0;try{const[t,y]=await Promise.all([$.get(Q("media/videos/")).catch(()=>({data:[]})),$.get(Q("media/pdfs/sensitive-metadata/")).catch(()=>({data:{results:[]}}))]),a=Array.isArray(t.data)?t.data:t.data?[{...t.data,content_type:"video"}]:[],p=((n=y.data)==null?void 0:n.results)||(Array.isArray(y.data)?y.data:y.data?[y.data]:[]);a.forEach(w=>w.content_type="video"),p.forEach(w=>w.content_type="pdf"),_.value=[...a,...p],console.log("Loaded sensitive metadata:",_.value.length,"items")}catch(t){console.error("Fehler beim Laden der Patientendaten:",t),_.value=[]}finally{A.value=!1}},z=n=>({pending:"bg-warning",in_progress:"bg-info",completed:"bg-success",rejected:"bg-danger"})[n]||"bg-secondary",F=n=>({pending:"Ausstehend",in_progress:"In Bearbeitung",completed:"Abgeschlossen",rejected:"Abgelehnt"})[n]||n,B=n=>({pending:"bg-warning",in_progress:"bg-info",completed:"bg-success",draft:"bg-secondary"})[n]||"bg-secondary",q=n=>({pending:"Ausstehend",in_progress:"In Bearbeitung",completed:"Abgeschlossen",draft:"Entwurf"})[n]||n,j=n=>({pending_validation:"bg-warning",validated_pending_anonymization:"bg-info",anonymized:"bg-success",no_sensitive_data:"bg-primary"})[n]||"bg-secondary",K=n=>({pending_validation:"Validierung ausstehend",validated_pending_anonymization:"Validiert - Anonymisierung ausstehend",anonymized:"Anonymisiert",no_sensitive_data:"Keine sensitiven Daten"})[n]||n,c=n=>{o.push({name:"Frame Annotation",query:{videoId:n.video_id,segmentId:n.id}})},e=async n=>{try{await $.patch(`/api/media/videos/segments/${n.id}/`,{status:"completed"}),u.updateAnnotationStatus("segment","in_progress","completed"),await M()}catch(t){console.error("Fehler beim Markieren des Segments als abgeschlossen:",t)}},S=n=>{o.push({name:"Untersuchung",query:{examinationId:n.id}})},U=async n=>{try{await $.patch(`/api/examinations/${n.id}/`,{status:"completed"}),u.updateAnnotationStatus("examination","in_progress","completed"),await b()}catch(t){console.error("Fehler beim Markieren der Untersuchung als abgeschlossen:",t)}},J=n=>{n.content_type==="video"?o.push("/video-meta-annotation"):n.content_type==="pdf"&&o.push("/pdf-meta-annotation")},es=async n=>{try{const t=n.content_type==="video"?"/api/media/videos/":"/api/media/pdf/";await $.patch(t,{sensitive_meta_id:n.id,requires_validation:!1,anonymization_status:"validated_pending_anonymization"}),u.updateAnnotationStatus("sensitive_meta","pending","completed"),await T()}catch(t){console.error("Fehler beim Markieren der Patientendaten als validiert:",t)}},R=n=>{if(!n)return"Nicht verfügbar";try{return new Date(n).toLocaleDateString("de-DE")}catch{return"Ungültiges Datum"}};return X(async()=>{await u.fetchAnnotationStats(),await Promise.all([M(),b(),T()])}),(n,t)=>{const y=os("router-link");return r(),d("div",Lt,[D(Et),s("div",Nt,[s("div",zt,[s("div",Ft,[s("div",Bt,[t[2]||(t[2]=s("h5",{class:"mb-0"},[s("i",{class:"fas fa-video text-primary me-2"}),l(" Video-Segment Annotationen ")],-1)),s("div",qt,[s("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:M,disabled:h.value},[s("i",{class:g(["fas fa-sync-alt",{"fa-spin":h.value}])},null,2),t[0]||(t[0]=l(" Aktualisieren ",-1))],8,jt),D(y,{to:"/frame-annotation",class:"btn btn-primary btn-sm"},{default:G(()=>[...t[1]||(t[1]=[s("i",{class:"fas fa-plus me-1"},null,-1),l(" Neue Annotation ",-1)])]),_:1})])]),s("div",Kt,[s("div",Rt,[s("table",Gt,[t[7]||(t[7]=s("thead",{class:"table-dark"},[s("tr",null,[s("th",null,"Video ID"),s("th",null,"Segment"),s("th",null,"Label"),s("th",null,"Status"),s("th",null,"Benutzer"),s("th",null,"Letzte Änderung"),s("th",null,"Aktionen")])],-1)),s("tbody",null,[h.value?(r(),d("tr",Jt,[...t[3]||(t[3]=[s("td",{colspan:"7",class:"text-center"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Laden...")])],-1)])])):v.value.length===0?(r(),d("tr",Ht,[...t[4]||(t[4]=[s("td",{colspan:"7",class:"text-center text-muted"},[s("i",{class:"fas fa-video fa-2x mb-2"}),s("br"),l(" Keine Video-Segmente verfügbar ")],-1)])])):(r(!0),d(E,{key:2},L(v.value,a=>(r(),d("tr",{key:a.id},[s("td",null,[s("code",null,i(a.videoId),1)]),s("td",null,i(a.startTime)+"s - "+i(a.endTime)+"s",1),s("td",null,[s("span",Ot,i(a.labelName),1)]),s("td",null,[s("span",{class:g(["badge",z(a.status)])},i(F(a.status)),3)]),s("td",null,[s("small",null,i(a.annotated_by||"Nicht zugewiesen"),1)]),s("td",null,[s("small",null,i(R(a.updated_at)),1)]),s("td",null,[s("div",Qt,[s("button",{class:"btn btn-outline-primary",onClick:p=>c(a),title:"Segment bearbeiten"},[...t[5]||(t[5]=[s("i",{class:"fas fa-edit"},null,-1)])],8,Wt),s("button",{class:"btn btn-outline-success",onClick:p=>e(a),disabled:a.status==="completed",title:"Als abgeschlossen markieren"},[...t[6]||(t[6]=[s("i",{class:"fas fa-check"},null,-1)])],8,Xt)])])]))),128))])])])])])]),s("div",Yt,[s("div",Zt,[s("div",se,[t[10]||(t[10]=s("h5",{class:"mb-0"},[s("i",{class:"fas fa-stethoscope text-success me-2"}),l(" Examination Annotationen ")],-1)),s("div",te,[s("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:b,disabled:f.value},[s("i",{class:g(["fas fa-sync-alt",{"fa-spin":f.value}])},null,2),t[8]||(t[8]=l(" Aktualisieren ",-1))],8,ee),D(y,{to:"/untersuchung",class:"btn btn-success btn-sm"},{default:G(()=>[...t[9]||(t[9]=[s("i",{class:"fas fa-plus me-1"},null,-1),l(" Neue Untersuchung ",-1)])]),_:1})])]),s("div",ne,[s("div",ae,[s("table",ie,[t[15]||(t[15]=s("thead",{class:"table-dark"},[s("tr",null,[s("th",null,"ID"),s("th",null,"Patient"),s("th",null,"Untersuchungsdatum"),s("th",null,"Befunde"),s("th",null,"Status"),s("th",null,"Untersucher"),s("th",null,"Aktionen")])],-1)),s("tbody",null,[f.value?(r(),d("tr",oe,[...t[11]||(t[11]=[s("td",{colspan:"7",class:"text-center"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Laden...")])],-1)])])):m.value.length===0?(r(),d("tr",le,[...t[12]||(t[12]=[s("td",{colspan:"7",class:"text-center text-muted"},[s("i",{class:"fas fa-stethoscope fa-2x mb-2"}),s("br"),l(" Keine Untersuchungen verfügbar ")],-1)])])):(r(!0),d(E,{key:2},L(m.value,a=>{var p,w,H,O;return r(),d("tr",{key:a.id},[s("td",null,[s("code",null,i(a.id),1)]),s("td",null,i((p=a.patient)==null?void 0:p.first_name)+" "+i((w=a.patient)==null?void 0:w.last_name),1),s("td",null,i(R(a.examination_date)),1),s("td",null,[(r(!0),d(E,null,L((H=a.findings)==null?void 0:H.slice(0,2),V=>(r(),d("span",{class:"badge bg-secondary me-1",key:V.id},i(V.name),1))),128)),((O=a.findings)==null?void 0:O.length)>2?(r(),d("span",de," +"+i(a.findings.length-2)+" weitere ",1)):Y("",!0)]),s("td",null,[s("span",{class:g(["badge",B(a.status)])},i(q(a.status)),3)]),s("td",null,[s("small",null,i(a.created_by||"Unbekannt"),1)]),s("td",null,[s("div",re,[s("button",{class:"btn btn-outline-primary",onClick:V=>S(a),title:"Untersuchung bearbeiten"},[...t[13]||(t[13]=[s("i",{class:"fas fa-edit"},null,-1)])],8,ce),s("button",{class:"btn btn-outline-success",onClick:V=>U(a),disabled:a.status==="completed",title:"Als abgeschlossen markieren"},[...t[14]||(t[14]=[s("i",{class:"fas fa-check"},null,-1)])],8,ue)])])])}),128))])])])])])]),s("div",ve,[s("div",me,[s("div",ge,[t[18]||(t[18]=s("h5",{class:"mb-0"},[s("i",{class:"fas fa-user-shield text-warning me-2"}),l(" Patientendaten Validierung ")],-1)),s("div",be,[s("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:T,disabled:A.value},[s("i",{class:g(["fas fa-sync-alt",{"fa-spin":A.value}])},null,2),t[16]||(t[16]=l(" Aktualisieren ",-1))],8,pe),D(y,{to:"/video-meta-annotation",class:"btn btn-warning btn-sm"},{default:G(()=>[...t[17]||(t[17]=[s("i",{class:"fas fa-play me-1"},null,-1),l(" Validierung starten ",-1)])]),_:1})])]),s("div",_e,[s("div",he,[s("table",fe,[t[23]||(t[23]=s("thead",{class:"table-dark"},[s("tr",null,[s("th",null,"ID"),s("th",null,"Typ"),s("th",null,"Patient"),s("th",null,"Untersuchungsdatum"),s("th",null,"Status"),s("th",null,"Validierung erforderlich"),s("th",null,"Aktionen")])],-1)),s("tbody",null,[A.value?(r(),d("tr",ye,[...t[19]||(t[19]=[s("td",{colspan:"7",class:"text-center"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Laden...")])],-1)])])):_.value.length===0?(r(),d("tr",ke,[...t[20]||(t[20]=[s("td",{colspan:"7",class:"text-center text-muted"},[s("i",{class:"fas fa-user-shield fa-2x mb-2"}),s("br"),l(" Keine Patientendaten zur Validierung verfügbar ")],-1)])])):(r(!0),d(E,{key:2},L(_.value,a=>{var p;return r(),d("tr",{key:a.id},[s("td",null,[s("code",null,i(a.id),1)]),s("td",null,[s("span",{class:g(["badge",a.content_type==="video"?"bg-primary":"bg-danger"])},[s("i",{class:g(a.content_type==="video"?"fas fa-video":"fas fa-file-pdf")},null,2),l(" "+i(((p=a.content_type)==null?void 0:p.toUpperCase())||"UNBEKANNT"),1)],2)]),s("td",null,i(a.patient_first_name)+" "+i(a.patient_last_name),1),s("td",null,i(R(a.examination_date)),1),s("td",null,[s("span",{class:g(["badge",j(a.anonymization_status)])},i(K(a.anonymization_status)),3)]),s("td",null,[s("span",{class:g(a.requires_validation?"text-warning":"text-success")},[s("i",{class:g(a.requires_validation?"fas fa-exclamation-triangle":"fas fa-check-circle")},null,2),l(" "+i(a.requires_validation?"Ja":"Nein"),1)],2)]),s("td",null,[s("div",xe,[s("button",{class:"btn btn-outline-primary",onClick:w=>J(a),title:"Patientendaten validieren"},[...t[21]||(t[21]=[s("i",{class:"fas fa-edit"},null,-1)])],8,we),s("button",{class:"btn btn-outline-success",onClick:w=>es(a),disabled:!a.requires_validation,title:"Als validiert markieren"},[...t[22]||(t[22]=[s("i",{class:"fas fa-check"},null,-1)])],8,Ae)])])])}),128))])])])])])])])])}}},Ce=ss(Se,[["__scopeId","data-v-80605bc2"]]);export{Ce as D};
