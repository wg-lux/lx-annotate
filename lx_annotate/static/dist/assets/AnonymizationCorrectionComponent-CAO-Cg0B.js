import{d as ye,g as he,h as d,e as R,i as ke,w as _e,c as u,a as e,k as i,n as x,t as b,F as Z,j as E,l as g,v as T,G as P,K as U,q as we,m as Ve,y as Me,z as h,A as k,o as c,_ as Fe}from"./main-DethiONo.js";import{u as Se}from"./mediaTypeStore-D6KIykKn.js";const xe={class:"container-fluid py-4"},Ee={class:"card"},Ce={class:"card-header pb-0 d-flex justify-content-between align-items-center"},Ne={class:"d-flex gap-2"},Ue=["disabled"],ze={class:"card-body"},Pe={key:0,class:"text-center py-5"},De={key:1,class:"alert alert-danger",role:"alert"},Be={key:2,class:"alert alert-info",role:"alert"},$e={class:"row mb-4"},Ae={class:"col-12"},Ie={class:"card bg-light"},Re={class:"card-body"},Te={class:"row"},Le={class:"col-md-8"},Oe={class:"card-title"},He={class:"row"},je={class:"col-sm-6"},Ge={class:"mb-1"},Ke={class:"mb-1"},We={class:"mb-1"},Xe={class:"col-sm-6"},Ye={class:"mb-1"},Ze={class:"mb-1"},qe={class:"mb-1"},Je={class:"col-md-4 text-end"},Qe={class:"d-flex flex-column gap-2"},es=["disabled"],ss=["disabled"],ts={class:"row mb-4"},as={class:"col-md-6"},os={class:"card h-100"},ns={class:"card-body"},ls={class:"mb-3"},is={key:0,class:"mb-3"},rs={key:1,class:"mb-3"},ds={class:"row"},us={class:"col-6"},cs={class:"col-6"},ms={class:"row mt-2"},vs={class:"col-6"},ps={class:"col-6"},bs={class:"mb-3"},gs={class:"form-check"},fs={class:"form-check"},ys=["disabled"],hs={key:0},ks={key:1},_s={class:"col-md-6"},ws={class:"card h-100"},Vs={class:"card-body"},Ms={class:"mb-3"},Fs={class:"form-check"},Ss={class:"form-check"},xs={key:0,class:"mb-3"},Es={key:1,class:"mb-3"},Cs={class:"mb-3"},Ns={class:"form-check"},Us={class:"form-check"},zs=["disabled"],Ps={key:0},Ds={key:1},Bs={key:0,class:"row mb-4"},$s={class:"col-12"},As={class:"card border-warning"},Is={class:"card-body"},Rs={class:"d-flex align-items-center"},Ts={class:"flex-grow-1"},Ls={class:"mb-1"},Os={class:"progress",style:{height:"8px"}},Hs={class:"text-muted mt-1"},js={class:"row"},Gs={class:"col-12"},Ks={class:"card"},Ws={class:"card-header"},Xs={class:"d-flex gap-2 mt-2"},Ys=["disabled"],Zs={class:"card-body"},qs={class:"video-container"},Js=["src"],Qs={class:"mt-3 d-flex justify-content-between align-items-center"},et={class:"d-flex gap-2"},st={class:"text-muted"},tt={key:1,class:"row mt-4"},at={class:"col-12"},ot={class:"card"},nt={class:"card-body"},lt={class:"table-responsive"},it={class:"table table-sm"},rt={class:"text-muted"},dt=["onClick"],ut=ye({__name:"AnonymizationCorrectionComponent",props:{fileId:{},mediaType:{}},setup(q){const J=Me();he();const Q=Se(),B=d(!1),y=d(""),D=d(!1),m=d(!1),f=d(""),_=d(0),w=d(""),C=d("original"),$=d(null),n=d(null);d(null);const M=d({sensitiveFrameCount:null,totalFrames:null,sensitiveRatio:null,duration:null,resolution:null});d({patientFirstName:"",patientLastName:"",patientGender:"",patientDob:"",casenumber:"",examiner:"",centerName:"",endoscopeType:"",endoscopeSn:""}),d(""),d(!1),d({firstNamePseudonym:"",lastNamePseudonym:"",originalFirstName:"",originalLastName:""});const o=d({type:"device_default",deviceName:"olympus_cv_1500",processingMethod:"streaming",endoscopeX:550,endoscopeY:0,endoscopeWidth:1350,endoscopeHeight:1080}),l=d({selectionMethod:"automatic",detectionEngine:"minicpm",processingMethod:"streaming",manualFrames:""}),F=d([]),ee=R(()=>n.value&&!m.value&&(o.value.type!=="custom"||o.value.endoscopeX>=0&&o.value.endoscopeY>=0&&o.value.endoscopeWidth>0&&o.value.endoscopeHeight>0)),se=R(()=>n.value&&!m.value&&(l.value.selectionMethod!=="manual"||l.value.manualFrames.trim().length>0)),L=R(()=>F.value.some(a=>a.status==="success"&&a.outputPath)),z=q,te=()=>{J.push("/anonymisierung/uebersicht")},A=async()=>{n.value?n.value.id=z.fileId:n.value={id:z.fileId},D.value=!0;try{await I(n.value.id)}finally{D.value=!1}},I=async a=>{var s,t;B.value=!0,y.value="";try{const[r,v,p]=await Promise.all([h.get(k(`media/videos/video-correction/${a}`)),h.get(k(`media/videos/${a}/metadata/`)),h.get(k(`media/videos/${a}/processing-history/`))]);n.value=r.data,M.value=v.data,F.value=p.data,n.value&&Q.setCurrentItem(n.value)}catch(r){y.value=((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.error)||"Fehler beim Laden der Video-Details",console.error("Error loading video details:",r)}finally{B.value=!1}},ae=async()=>{var a,s;if(n.value){m.value=!0,f.value="analysis",_.value=0,w.value="Video wird analysiert...";try{const t=await h.post(k(`media/videos/${n.value.id}/analyze/`),{use_minicpm:l.value.detectionEngine!=="traditional",detailed_analysis:!0});M.value={...M.value,...t.data},_.value=100,w.value="Analyse abgeschlossen",F.value.unshift({id:Date.now(),timestamp:new Date().toISOString(),operation:"analysis",status:"success",details:`${t.data.sensitiveFrameCount||0} sensible Frames gefunden`})}catch(t){y.value=((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.error)||"Fehler bei der Video-Analyse",console.error("Error analyzing video:",t)}finally{m.value=!1,f.value=""}}},oe=async()=>{var a,s;if(n.value){m.value=!0,f.value="masking",_.value=0,w.value="Maskierung wird vorbereitet...";try{const t={mask_type:o.value.type,device_name:o.value.deviceName,use_streaming:o.value.processingMethod==="streaming",custom_mask:o.value.type==="custom"?{endoscope_x:o.value.endoscopeX,endoscope_y:o.value.endoscopeY,endoscope_width:o.value.endoscopeWidth,endoscope_height:o.value.endoscopeHeight}:void 0},v=(await h.post(k(`media/videos/${n.value.id}/apply-mask/`),t)).data.task_id;await O(v,"masking")}catch(t){y.value=((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.error)||"Fehler bei der Maskierung",console.error("Error applying mask:",t),m.value=!1,f.value=""}}},ne=async()=>{var a,s;if(n.value){m.value=!0,f.value="frame_removal",_.value=0,w.value="Frame-Entfernung wird vorbereitet...";try{const t={selection_method:l.value.selectionMethod,detection_engine:l.value.detectionEngine,use_streaming:l.value.processingMethod==="streaming",manual_frames:l.value.selectionMethod==="manual"?le(l.value.manualFrames):void 0},v=(await h.post(k(`media/videos/${n.value.id}/remove-frames/`),t)).data.task_id;await O(v,"frame_removal")}catch(t){y.value=((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.error)||"Fehler bei der Frame-Entfernung",console.error("Error removing frames:",t),m.value=!1,f.value=""}}},le=a=>{const s=[],t=a.split(",");for(const r of t){const v=r.trim();if(v.includes("-")){const[p,S]=v.split("-").map(V=>parseInt(V.trim()));if(!isNaN(p)&&!isNaN(S))for(let V=p;V<=S;V++)s.push(V)}else{const p=parseInt(v);isNaN(p)||s.push(p)}}return[...new Set(s)].sort((r,v)=>r-v)},O=async(a,s)=>{let v=0;const p=async()=>{if(v>=300)throw new Error("Zeitüberschreitung bei der Verarbeitung");try{const S=await h.get(k(`media/videos/task-status/${a}/`)),{status:V,progress:fe,message:Y,result:N}=S.data;if(_.value=fe||0,w.value=Y||"Verarbeitung läuft...",V==="SUCCESS"){_.value=100,w.value="Verarbeitung abgeschlossen",F.value.unshift({id:Date.now(),timestamp:new Date().toISOString(),operation:s,status:"success",details:(N==null?void 0:N.summary)||"Verarbeitung erfolgreich",outputPath:N==null?void 0:N.output_path}),await A(),m.value=!1,f.value="";return}if(V==="FAILURE")throw new Error(Y||"Verarbeitung fehlgeschlagen");v++,setTimeout(p,5e3)}catch(S){throw console.error("Polling error:",S),S}};await p()},ie=async()=>{m.value=!1,f.value="",_.value=0,w.value=""},re=async()=>{var a,s;if(n.value)try{await h.post(k(`media/videos/${n.value.id}/reprocess/`)),await A()}catch(t){y.value=((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.error)||"Fehler bei der Neuverarbeitung",console.error("Error reprocessing video:",t)}},H=()=>{if(!n.value)return"";const a="http://localhost:8000";if(C.value==="processed"&&L.value){const s=F.value.filter(t=>t.status==="success"&&t.outputPath).sort((t,r)=>new Date(r.timestamp).getTime()-new Date(t.timestamp).getTime())[0];if(s)return`${a}/api/media/videos/processed-videos/${n.value.id}/${s.id}/`}return`${a}/api/media/videos/${n.value.id}/`},j=a=>{$.value&&($.value.currentTime+=a)},de=async a=>{var s,t;if(n.value)try{const r=await h.get(k(`video-download-processed/${n.value.id}/`),{params:{path:a},responseType:"blob"}),v=window.URL.createObjectURL(new Blob([r.data])),p=document.createElement("a");p.href=v,p.setAttribute("download",`${n.value.filename}_processed.mp4`),document.body.appendChild(p),p.click(),p.remove(),window.URL.revokeObjectURL(v)}catch(r){y.value=((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.error)||"Fehler beim Download",console.error("Error downloading result:",r)}},ue=a=>{console.error("Video loading error:",a);const s=a.target;console.error("Video error details:",{error:s.error,networkState:s.networkState,readyState:s.readyState,currentSrc:s.currentSrc})},ce=()=>{console.log("Video loading started for:",H())},me=()=>{console.log("Video can play, loaded successfully")},ve=a=>{if(!a)return"Unbekannt";const s=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,t)*100)/100+" "+s[t]},G=a=>a?new Date(a).toLocaleDateString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",pe=a=>a==null?"Unbekannt":`${(a*100).toFixed(1)}%`,K=a=>({not_started:"bg-secondary",processing:"bg-warning",done_processing_anonymization:"bg-success",failed:"bg-danger",success:"bg-success"})[a]||"bg-secondary",W=a=>({not_started:"Nicht gestartet",processing:"In Bearbeitung",done_processing_anonymization:"Fertig",failed:"Fehlgeschlagen",success:"Erfolgreich"})[a]||a,be=a=>a==null?"badge bg-secondary":a>.1?"badge bg-danger":a>.05?"badge bg-warning":"badge bg-success",X=a=>({analysis:"Video-Analyse",masking:"Maskierung",frame_removal:"Frame-Entfernung",reprocessing:"Neuverarbeitung"})[a]||a,ge=a=>({analysis:"bg-info",masking:"bg-warning",frame_removal:"bg-danger",reprocessing:"bg-primary"})[a]||"bg-secondary";return ke(async()=>{isNaN(z.fileId)?y.value="Ungültige Datei-ID":await I(z.fileId)}),_e(()=>z.fileId,async a=>{a&&!isNaN(a)&&await I(a)}),(a,s)=>(c(),u("div",xe,[e("div",Ee,[e("div",Ce,[s[20]||(s[20]=e("h4",{class:"mb-0"},"Anonymisierungskorrektur",-1)),e("div",Ne,[e("button",{class:"btn btn-outline-secondary btn-sm",onClick:te},[...s[18]||(s[18]=[e("i",{class:"fas fa-arrow-left me-1"},null,-1),i(" Zurück zur Übersicht ",-1)])]),e("button",{class:"btn btn-outline-primary btn-sm",onClick:A,disabled:D.value},[e("i",{class:x(["fas fa-sync-alt",{"fa-spin":D.value}])},null,2),s[19]||(s[19]=i(" Aktualisieren ",-1))],8,Ue)])]),e("div",ze,[B.value?(c(),u("div",Pe,[...s[21]||(s[21]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Wird geladen...")],-1),e("p",{class:"mt-2"},"Video wird geladen...",-1)])])):y.value?(c(),u("div",De,[s[22]||(s[22]=e("strong",null,"Fehler:",-1)),i(" "+b(y.value),1)])):n.value?(c(),u(Z,{key:3},[e("div",$e,[e("div",Ae,[e("div",Ie,[e("div",Re,[e("div",Te,[e("div",Le,[e("h5",Oe,b(n.value.filename),1),e("div",He,[e("div",je,[e("p",Ge,[s[24]||(s[24]=e("strong",null,"Status:",-1)),e("span",{class:x([K(n.value.anonymizationStatus),"badge ms-1"])},b(W(n.value.anonymizationStatus)),3)]),e("p",Ke,[s[25]||(s[25]=e("strong",null,"Größe:",-1)),i(" "+b(ve(n.value.fileSize??null)),1)]),e("p",We,[s[26]||(s[26]=e("strong",null,"Erstellt:",-1)),i(" "+b(G(n.value.createdAt)),1)])]),e("div",Xe,[e("p",Ye,[s[27]||(s[27]=e("strong",null,"Sensitive Frames:",-1)),i(" "+b(M.value.sensitiveFrameCount||"Unbekannt"),1)]),e("p",Ze,[s[28]||(s[28]=e("strong",null,"Gesamte Frames:",-1)),i(" "+b(M.value.totalFrames||"Unbekannt"),1)]),e("p",qe,[s[29]||(s[29]=e("strong",null,"Sensitive Ratio:",-1)),e("span",{class:x(be(M.value.sensitiveRatio))},b(pe(M.value.sensitiveRatio)),3)])])])]),e("div",Je,[e("div",Qe,[e("button",{class:"btn btn-outline-info btn-sm",onClick:ae,disabled:m.value},[...s[30]||(s[30]=[e("i",{class:"fas fa-search me-1"},null,-1),i(" Video analysieren ",-1)])],8,es),e("button",{class:"btn btn-outline-warning btn-sm",onClick:re,disabled:m.value},[...s[31]||(s[31]=[e("i",{class:"fas fa-redo me-1"},null,-1),i(" Erneut verarbeiten ",-1)])],8,ss)])])])])])])]),e("div",ts,[e("div",as,[e("div",os,[s[46]||(s[46]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-mask me-2"}),i(" Video Maskierung ")])],-1)),e("div",ns,[s[45]||(s[45]=e("p",{class:"text-muted mb-3"}," Empfohlen bei hoher Sensitivität (>10%). Verdeckt sensible Bereiche dauerhaft. ",-1)),e("div",ls,[s[33]||(s[33]=e("label",{class:"form-label"},"Maskierungstyp:",-1)),g(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.type=t),class:"form-select"},[...s[32]||(s[32]=[e("option",{value:"device_default"},"Gerätespezifische Maske",-1),e("option",{value:"roi_based"},"ROI-basierte Maske",-1),e("option",{value:"custom"},"Benutzerdefiniert",-1)])],512),[[T,o.value.type]])]),o.value.type==="device_default"?(c(),u("div",is,[s[35]||(s[35]=e("label",{class:"form-label"},"Endoskop-Gerät:",-1)),g(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.value.deviceName=t),class:"form-select"},[...s[34]||(s[34]=[e("option",{value:"olympus_cv_1500"},"Olympus CV-1500",-1),e("option",{value:"olympus_cv_190"},"Olympus CV-190",-1),e("option",{value:"pentax_epk_i7010"},"Pentax EPK-i7010",-1),e("option",{value:"fujifilm_vp_4450hd"},"Fujifilm VP-4450HD",-1)])],512),[[T,o.value.deviceName]])])):E("",!0),o.value.type==="custom"?(c(),u("div",rs,[e("div",ds,[e("div",us,[s[36]||(s[36]=e("label",{class:"form-label"},"Endoskop X:",-1)),g(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=t=>o.value.endoscopeX=t),class:"form-control",min:"0"},null,512),[[P,o.value.endoscopeX,void 0,{number:!0}]])]),e("div",cs,[s[37]||(s[37]=e("label",{class:"form-label"},"Endoskop Y:",-1)),g(e("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=t=>o.value.endoscopeY=t),class:"form-control",min:"0"},null,512),[[P,o.value.endoscopeY,void 0,{number:!0}]])])]),e("div",ms,[e("div",vs,[s[38]||(s[38]=e("label",{class:"form-label"},"Breite:",-1)),g(e("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=t=>o.value.endoscopeWidth=t),class:"form-control",min:"1"},null,512),[[P,o.value.endoscopeWidth,void 0,{number:!0}]])]),e("div",ps,[s[39]||(s[39]=e("label",{class:"form-label"},"Höhe:",-1)),g(e("input",{type:"number","onUpdate:modelValue":s[5]||(s[5]=t=>o.value.endoscopeHeight=t),class:"form-control",min:"1"},null,512),[[P,o.value.endoscopeHeight,void 0,{number:!0}]])])])])):E("",!0),e("div",bs,[s[42]||(s[42]=e("label",{class:"form-label"},"Verarbeitungsmethode:",-1)),e("div",gs,[g(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[6]||(s[6]=t=>o.value.processingMethod=t),value:"streaming",id:"maskStreaming"},null,512),[[U,o.value.processingMethod]]),s[40]||(s[40]=e("label",{class:"form-check-label",for:"maskStreaming"},[e("strong",null,"Streaming (Empfohlen)"),i(" - Schnelle Verarbeitung mit Named Pipes ")],-1))]),e("div",fs,[g(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[7]||(s[7]=t=>o.value.processingMethod=t),value:"direct",id:"maskDirect"},null,512),[[U,o.value.processingMethod]]),s[41]||(s[41]=e("label",{class:"form-check-label",for:"maskDirect"}," Direkte Verarbeitung - Für spezielle Anforderungen ",-1))])]),e("button",{class:"btn btn-warning w-100",onClick:oe,disabled:m.value||!ee.value},[s[44]||(s[44]=e("i",{class:"fas fa-mask me-2"},null,-1)),m.value&&f.value==="masking"?(c(),u("span",hs,[...s[43]||(s[43]=[e("i",{class:"fas fa-spinner fa-spin me-1"},null,-1),i(" Maskierung wird angewendet... ",-1)])])):(c(),u("span",ks," Maskierung anwenden "))],8,ys)])])]),e("div",_s,[e("div",ws,[s[60]||(s[60]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-cut me-2"}),i(" Frame-Entfernung ")])],-1)),e("div",Vs,[s[59]||(s[59]=e("p",{class:"text-muted mb-3"}," Empfohlen bei niedriger Sensitivität (≤10%). Entfernt einzelne sensible Frames. ",-1)),e("div",Ms,[s[49]||(s[49]=e("label",{class:"form-label"},"Frame-Auswahl:",-1)),e("div",Fs,[g(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[8]||(s[8]=t=>l.value.selectionMethod=t),value:"automatic",id:"frameAutomatic"},null,512),[[U,l.value.selectionMethod]]),s[47]||(s[47]=e("label",{class:"form-check-label",for:"frameAutomatic"},[e("strong",null,"Automatisch"),i(" - KI-basierte Erkennung sensibler Frames ")],-1))]),e("div",Ss,[g(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[9]||(s[9]=t=>l.value.selectionMethod=t),value:"manual",id:"frameManual"},null,512),[[U,l.value.selectionMethod]]),s[48]||(s[48]=e("label",{class:"form-check-label",for:"frameManual"}," Manuell - Eigene Frame-Liste eingeben ",-1))])]),l.value.selectionMethod==="manual"?(c(),u("div",xs,[s[50]||(s[50]=e("label",{class:"form-label"},"Frame-Nummern (kommagetrennt):",-1)),g(e("textarea",{"onUpdate:modelValue":s[10]||(s[10]=t=>l.value.manualFrames=t),class:"form-control",rows:"3",placeholder:"z.B. 10,25,30-35,100"},null,512),[[P,l.value.manualFrames]]),s[51]||(s[51]=e("small",{class:"form-text text-muted"}," Unterstützt einzelne Frames (10) und Bereiche (30-35) ",-1))])):E("",!0),l.value.selectionMethod==="automatic"?(c(),u("div",Es,[s[53]||(s[53]=e("label",{class:"form-label"},"Erkennungs-Engine:",-1)),g(e("select",{"onUpdate:modelValue":s[11]||(s[11]=t=>l.value.detectionEngine=t),class:"form-select"},[...s[52]||(s[52]=[e("option",{value:"minicpm"},"MiniCPM-o 2.6 (Empfohlen)",-1),e("option",{value:"traditional"},"Traditionell (OCR + LLM)",-1),e("option",{value:"hybrid"},"Hybrid (Beide kombiniert)",-1)])],512),[[T,l.value.detectionEngine]])])):E("",!0),e("div",Cs,[s[56]||(s[56]=e("label",{class:"form-label"},"Verarbeitungsmethode:",-1)),e("div",Ns,[g(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[12]||(s[12]=t=>l.value.processingMethod=t),value:"streaming",id:"frameStreaming"},null,512),[[U,l.value.processingMethod]]),s[54]||(s[54]=e("label",{class:"form-check-label",for:"frameStreaming"},[e("strong",null,"Streaming (Empfohlen)"),i(" - Bis zu 10x schneller ")],-1))]),e("div",Us,[g(e("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":s[13]||(s[13]=t=>l.value.processingMethod=t),value:"traditional",id:"frameTraditional"},null,512),[[U,l.value.processingMethod]]),s[55]||(s[55]=e("label",{class:"form-check-label",for:"frameTraditional"}," Traditionell - Für Kompatibilität ",-1))])]),e("button",{class:"btn btn-danger w-100",onClick:ne,disabled:m.value||!se.value},[s[58]||(s[58]=e("i",{class:"fas fa-cut me-2"},null,-1)),m.value&&f.value==="frame_removal"?(c(),u("span",Ps,[...s[57]||(s[57]=[e("i",{class:"fas fa-spinner fa-spin me-1"},null,-1),i(" Frames werden entfernt... ",-1)])])):(c(),u("span",Ds," Frames entfernen "))],8,zs)])])])]),m.value?(c(),u("div",Bs,[e("div",$s,[e("div",As,[e("div",Is,[e("div",Rs,[s[62]||(s[62]=e("div",{class:"spinner-border spinner-border-sm text-warning me-3",role:"status"},[e("span",{class:"visually-hidden"},"Verarbeitung...")],-1)),e("div",Ts,[e("h6",Ls,b(X(f.value)),1),e("div",Os,[e("div",{class:"progress-bar progress-bar-striped progress-bar-animated",style:we({width:_.value+"%"})},null,4)]),e("small",Hs,b(w.value),1)]),e("button",{class:"btn btn-outline-danger btn-sm",onClick:ie},[...s[61]||(s[61]=[e("i",{class:"fas fa-times me-1"},null,-1),i(" Abbrechen ",-1)])])])])])])])):E("",!0),e("div",js,[e("div",Gs,[e("div",Ks,[e("div",Ws,[s[63]||(s[63]=e("h5",{class:"mb-0"},"Video-Vorschau",-1)),e("div",Xs,[e("button",{class:x(["btn btn-sm",C.value==="original"?"btn-primary":"btn-outline-primary"]),onClick:s[14]||(s[14]=t=>C.value="original")}," Original ",2),e("button",{class:x(["btn btn-sm",C.value==="processed"?"btn-primary":"btn-outline-primary"]),onClick:s[15]||(s[15]=t=>C.value="processed"),disabled:!L.value}," Verarbeitet ",10,Ys)])]),e("div",Zs,[e("div",qs,[e("video",{ref_key:"videoElement",ref:$,controls:"",width:"100%",height:"600px",src:H(),onError:ue,onLoadstart:ce,onCanplay:me}," Ihr Browser unterstützt dieses Video-Format nicht. ",40,Js)]),e("div",Qs,[e("div",et,[e("button",{class:"btn btn-outline-secondary btn-sm",onClick:s[16]||(s[16]=t=>j(-10))},[...s[64]||(s[64]=[e("i",{class:"fas fa-backward me-1"},null,-1),i(" -10s ",-1)])]),e("button",{class:"btn btn-outline-secondary btn-sm",onClick:s[17]||(s[17]=t=>j(10))},[...s[65]||(s[65]=[e("i",{class:"fas fa-forward me-1"},null,-1),i(" +10s ",-1)])])]),e("div",st,[e("small",null,b(C.value==="original"?"Original-Video":"Verarbeitetes Video"),1)])])])])])]),F.value.length?(c(),u("div",tt,[e("div",at,[e("div",ot,[s[68]||(s[68]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},"Verarbeitungsverlauf")],-1)),e("div",nt,[e("div",lt,[e("table",it,[s[67]||(s[67]=e("thead",null,[e("tr",null,[e("th",null,"Zeitstempel"),e("th",null,"Operation"),e("th",null,"Status"),e("th",null,"Details"),e("th",null,"Aktionen")])],-1)),e("tbody",null,[(c(!0),u(Z,null,Ve(F.value,t=>(c(),u("tr",{key:t.id},[e("td",null,b(G(t.timestamp)),1),e("td",null,[e("span",{class:x(["badge",ge(t.operation)])},b(X(t.operation)),3)]),e("td",null,[e("span",{class:x(["badge",K(t.status)])},b(W(t.status)),3)]),e("td",null,[e("small",rt,b(t.details),1)]),e("td",null,[t.status==="success"&&t.outputPath?(c(),u("button",{key:0,class:"btn btn-outline-primary btn-sm",onClick:r=>de(t.outputPath)},[...s[66]||(s[66]=[e("i",{class:"fas fa-download"},null,-1)])],8,dt)):E("",!0)])]))),128))])])])])])])])):E("",!0)],64)):(c(),u("div",Be,[...s[23]||(s[23]=[e("i",{class:"fas fa-info-circle me-2"},null,-1),i(" Kein Video ausgewählt. Bitte wählen Sie ein Video aus der Übersicht aus. ",-1)])]))])])]))}}),vt=Fe(ut,[["__scopeId","data-v-ee7f5e3e"]]);export{vt as default};
